Return-Path: <alsa-devel-bounces@alsa-project.org>
X-Original-To: lists+alsa-devel@lfdr.de
Delivered-To: lists+alsa-devel@lfdr.de
Received: from alsa0.perex.cz (alsa0.perex.cz [77.48.224.243])
	by mail.lfdr.de (Postfix) with ESMTPS id 4EAC8E7392
	for <lists+alsa-devel@lfdr.de>; Mon, 28 Oct 2019 15:24:56 +0100 (CET)
Received: from alsa1.perex.cz (alsa1.perex.cz [207.180.221.201])
	(using TLSv1.2 with cipher AECDH-AES256-SHA (256/256 bits))
	(No client certificate requested)
	by alsa0.perex.cz (Postfix) with ESMTPS id B916A1F53;
	Mon, 28 Oct 2019 15:24:05 +0100 (CET)
DKIM-Filter: OpenDKIM Filter v2.11.0 alsa0.perex.cz B916A1F53
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/simple; d=alsa-project.org;
	s=default; t=1572272695;
	bh=tkFHz/b8etdQHPKI1g3JIMeP1QHtkHiOIEsg2p6AzDQ=;
	h=Date:From:To:In-Reply-To:References:Cc:Subject:List-Id:
	 List-Unsubscribe:List-Archive:List-Post:List-Help:List-Subscribe:
	 From;
	b=XABoILYNDDV9PmdagBkzeUG87orpSDPw48UjyCvcriGmeVuokI8QQoCDB23ykdT3a
	 +ylSSw8SFtr8m8VN17aCaw5zcqqmCwVZEILbmrXbQBhhvPzFqdjI/3FV3lEOW+Egr2
	 I5wt9ET1fXuURjNZGTgvXSbMsiXAPgloCiJSNypk=
Received: from alsa1.perex.cz (localhost.localdomain [127.0.0.1])
	by alsa1.perex.cz (Postfix) with ESMTP id B82BEF800E7;
	Mon, 28 Oct 2019 15:23:12 +0100 (CET)
X-Original-To: alsa-devel@alsa-project.org
Delivered-To: alsa-devel@alsa-project.org
Received: by alsa1.perex.cz (Postfix, from userid 50401)
 id 53CA4F80361; Mon, 28 Oct 2019 15:23:11 +0100 (CET)
X-Spam-Checker-Version: SpamAssassin 3.4.0 (2014-02-07) on alsa1.perex.cz
X-Spam-Level: 
X-Spam-Status: No, score=0.0 required=5.0 tests=SPF_HELO_NONE,SPF_PASS
 autolearn=disabled version=3.4.0
Received: from mx1.suse.de (mx2.suse.de [195.135.220.15])
 (using TLSv1.2 with cipher AECDH-AES256-SHA (256/256 bits))
 (No client certificate requested)
 by alsa1.perex.cz (Postfix) with ESMTPS id 02B74F800E7
 for <alsa-devel@alsa-project.org>; Mon, 28 Oct 2019 15:23:08 +0100 (CET)
DKIM-Filter: OpenDKIM Filter v2.11.0 alsa1.perex.cz 02B74F800E7
X-Virus-Scanned: by amavisd-new at test-mx.suse.de
Received: from relay2.suse.de (unknown [195.135.220.254])
 by mx1.suse.de (Postfix) with ESMTP id AB60EB57C;
 Mon, 28 Oct 2019 14:23:07 +0000 (UTC)
Date: Mon, 28 Oct 2019 15:23:07 +0100
Message-ID: <s5h5zk9ar04.wl-tiwai@suse.de>
From: Takashi Iwai <tiwai@suse.de>
To: Jaroslav Kysela <perex@perex.cz>
In-Reply-To: <149b2b82-f204-00ac-b3e4-6a1dd7de07ee@perex.cz>
References: <20191025123038.19728-1-perex@perex.cz>
 <s5hk18tuhio.wl-tiwai@suse.de>
 <bce57a56-99d0-62d7-1d53-099a75349341@perex.cz>
 <s5h36fgvs0m.wl-tiwai@suse.de>
 <9403a6a7-9b7e-c2a4-5acf-50d6cbaea7c7@perex.cz>
 <s5hwocsucfp.wl-tiwai@suse.de>
 <83e4dc16-07e7-aafb-db43-01a89e31270b@perex.cz>
 <s5heez0oleh.wl-tiwai@suse.de>
 <12c5e861-dd78-99cc-b16f-5ddc2ad0e33b@perex.cz>
 <alpine.DEB.2.21.1910252050230.16459@zeliteleevi>
 <ed87baf1-1f2e-22d6-2bd7-267b209310d4@perex.cz>
 <s5h7e4sneiw.wl-tiwai@suse.de>
 <149b2b82-f204-00ac-b3e4-6a1dd7de07ee@perex.cz>
User-Agent: Wanderlust/2.15.9 (Almost Unreal) SEMI/1.14.6 (Maruoka)
 FLIM/1.14.9 (=?UTF-8?B?R29qxY0=?=) APEL/10.8 Emacs/25.3
 (x86_64-suse-linux-gnu) MULE/6.0 (HANACHIRUSATO)
MIME-Version: 1.0 (generated by SEMI 1.14.6 - "Maruoka")
Cc: ALSA development <alsa-devel@alsa-project.org>,
 Mark Brown <broonie@kernel.org>,
 Pierre-Louis Bossart <pierre-louis.bossart@linux.intel.com>,
 Kai Vehmanen <kai.vehmanen@linux.intel.com>
Subject: Re: [alsa-devel] [PATCH] ASoC: change 'HDMI/DP, pcm=' to 'HDMI/DP,
	pcm=' Jack control names
X-BeenThere: alsa-devel@alsa-project.org
X-Mailman-Version: 2.1.15
Precedence: list
List-Id: "Alsa-devel mailing list for ALSA developers -
 http://www.alsa-project.org" <alsa-devel.alsa-project.org>
List-Unsubscribe: <https://mailman.alsa-project.org/mailman/options/alsa-devel>, 
 <mailto:alsa-devel-request@alsa-project.org?subject=unsubscribe>
List-Archive: <http://mailman.alsa-project.org/pipermail/alsa-devel/>
List-Post: <mailto:alsa-devel@alsa-project.org>
List-Help: <mailto:alsa-devel-request@alsa-project.org?subject=help>
List-Subscribe: <https://mailman.alsa-project.org/mailman/listinfo/alsa-devel>, 
 <mailto:alsa-devel-request@alsa-project.org?subject=subscribe>
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: 7bit
Errors-To: alsa-devel-bounces@alsa-project.org
Sender: "Alsa-devel" <alsa-devel-bounces@alsa-project.org>

On Sat, 26 Oct 2019 19:11:27 +0200,
Jaroslav Kysela wrote:
> 
> Dne 26. 10. 19 v 9:37 Takashi Iwai napsal(a):
> > On Fri, 25 Oct 2019 23:03:26 +0200,
> > Jaroslav Kysela wrote:
> >>
> >> Dne 25. 10. 19 v 20:02 Kai Vehmanen napsal(a):
> >>> Hi Jaroslav and all,
> >>>
> >>> On Fri, 25 Oct 2019, Jaroslav Kysela wrote:
> >>>
> >>>> the single user. Another problem is that we are not able to review all those
> >>>> mistakes at the merge time. It is not a complain but a true fact.
> >>>
> >>> but the strings are in kernel patches, so even if all UCM files don't
> >>> go through the list, we can always review when the strings are added
> >>> in kernel, right?
> >>
> >> My point is that we already did this incomplete review (the wrong
> >> strings are in the current kernel). We cannot prevent to avoid those
> >> code merges, we are just human. I just don't think that the driver /
> >> control names should be part of the don't-break-the-userspace policy.
> >
> > It's a similar situation like the long-time discussion of tracing:
> > when the kernel broke latencytop by changing the tracing format, we
> > had to revert it in the end although the tracing format itself isn't
> > strictly a "standard kernel ABI".  The consensus is: if upgrading the
> > kernel breaks anything *significant*, it's a regression and no-go.
> > It's not about whether it's a part of ABI or not.
> >
> > In our particular case, the strings you wanted to fix are the ones
> > that are actually hard-coded by the UCM profiles that are known to be
> > really used on major systems.  That's the only reason of NAK.  If it
> > were for some other minor kcontrol elements, it would have been OK.
> >
> > Kai's work to integrate SOF to the legacy HDMI driver would be also OK
> > because it provides the compatibility mode.  That is, we have some
> > excuse that it's not us but users (distros) who actually breaks by
> > choosing the kernel configuration explicitly (and even there can be a
> > workaround with a module option).
> 
> We can add another kernel option for this fix, too. If you like to move
> in this direction, I'll modify my patch.

I don't think it's worth for that.  With Kai's patch set, we're going
to move (back) to the legacy HDMI codec driver in most cases, so these
strings will be specifically to the SST driver -- which are used by
only limited number of devices like Chromebook or such. 

That said, if the reason for the change is just about consistency, the
best recipe is to forget it.

> The question is, if the kernel should provide a hint to the user space
> (UCM), that something *significant* changed. Perhaps, the component
> field in the control API might be used for this purpose as I already
> proposed. In this way, we can support both kernels (with old and new
> control names).

I'm afraid that the current UCM profile cannot handle any extension as
of now.  We may need to introduce some incompatible extensibility at
first to UCM profile syntax.  This can be a good topic for the next
meeting.


thanks,

Takashi
_______________________________________________
Alsa-devel mailing list
Alsa-devel@alsa-project.org
https://mailman.alsa-project.org/mailman/listinfo/alsa-devel
