Return-Path: <alsa-devel-bounces@alsa-project.org>
X-Original-To: lists+alsa-devel@lfdr.de
Delivered-To: lists+alsa-devel@lfdr.de
Received: from alsa0.perex.cz (alsa0.perex.cz [77.48.224.243])
	by mail.lfdr.de (Postfix) with ESMTPS id 7254224CEB6
	for <lists+alsa-devel@lfdr.de>; Fri, 21 Aug 2020 09:15:51 +0200 (CEST)
Received: from alsa1.perex.cz (alsa1.perex.cz [207.180.221.201])
	(using TLSv1.2 with cipher AECDH-AES256-SHA (256/256 bits))
	(No client certificate requested)
	by alsa0.perex.cz (Postfix) with ESMTPS id 3A0B51691;
	Fri, 21 Aug 2020 09:15:00 +0200 (CEST)
DKIM-Filter: OpenDKIM Filter v2.11.0 alsa0.perex.cz 3A0B51691
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/simple; d=alsa-project.org;
	s=default; t=1597994150;
	bh=WbEAoRIE5xTMTE0Gp4dxiOFntaXtE5udut7fBiV5/FA=;
	h=Date:From:To:Subject:In-Reply-To:References:Cc:List-Id:
	 List-Unsubscribe:List-Archive:List-Post:List-Help:List-Subscribe:
	 From;
	b=Lq7MRMZbqQ52hO7jr6wo48Y0jHFJ86rnbE5Qdhh1W3MbMIbybP0eqCcp7sQoO6DHW
	 VZ47Gb8dmbP2WckhN3lJyDlNJnuAOq9JBFMBXz4p69TZ8tkOUwiUv09aKzb2LdwB9C
	 kG9bgQi5mtndFcZBpgznKxa2RHSGm54V4+i9ymRQ=
Received: from alsa1.perex.cz (localhost.localdomain [127.0.0.1])
	by alsa1.perex.cz (Postfix) with ESMTP id B2920F80218;
	Fri, 21 Aug 2020 09:14:59 +0200 (CEST)
X-Original-To: alsa-devel@alsa-project.org
Delivered-To: alsa-devel@alsa-project.org
Received: by alsa1.perex.cz (Postfix, from userid 50401)
 id 5710AF80218; Fri, 21 Aug 2020 09:14:58 +0200 (CEST)
X-Spam-Checker-Version: SpamAssassin 3.4.0 (2014-02-07) on alsa1.perex.cz
X-Spam-Level: 
X-Spam-Status: No, score=0.0 required=5.0 tests=SPF_HELO_NONE,SPF_PASS
 autolearn=disabled version=3.4.0
Received: from relmlie5.idc.renesas.com (relmlor1.renesas.com
 [210.160.252.171])
 by alsa1.perex.cz (Postfix) with ESMTP id 6101CF800D3
 for <alsa-devel@alsa-project.org>; Fri, 21 Aug 2020 09:14:42 +0200 (CEST)
DKIM-Filter: OpenDKIM Filter v2.11.0 alsa1.perex.cz 6101CF800D3
Date: 21 Aug 2020 16:14:36 +0900
X-IronPort-AV: E=Sophos;i="5.76,335,1592838000"; d="scan'208";a="55152329"
Received: from unknown (HELO relmlir6.idc.renesas.com) ([10.200.68.152])
 by relmlie5.idc.renesas.com with ESMTP; 21 Aug 2020 16:14:36 +0900
Received: from mercury.renesas.com (unknown [10.166.252.133])
 by relmlir6.idc.renesas.com (Postfix) with ESMTP id CAF0341EB05D;
 Fri, 21 Aug 2020 16:14:36 +0900 (JST)
Message-ID: <87imdczd4i.wl-kuninori.morimoto.gx@renesas.com>
From: Kuninori Morimoto <kuninori.morimoto.gx@renesas.com>
To: Sameer Pujar <spujar@nvidia.com>
Subject: Re: More Generic Audio Graph Sound Card idea
In-Reply-To: <097e3fc4-4a84-e101-e6b6-045c3e9e5bfc@nvidia.com>
References: <87k0xszlep.wl-kuninori.morimoto.gx@renesas.com>
 <097e3fc4-4a84-e101-e6b6-045c3e9e5bfc@nvidia.com>
User-Agent: Wanderlust/2.15.9 Emacs/26.3 Mule/6.0
MIME-Version: 1.0 (generated by SEMI-EPG 1.14.7 - "Harue")
Content-Type: text/plain; charset=US-ASCII
Cc: Linux-ALSA <alsa-devel@alsa-project.org>, Mark Brown <broonie@kernel.org>,
 Pierre-Louis Bossart <pierre-louis.bossart@linux.intel.com>,
 jonathanh@nvidia.com
X-BeenThere: alsa-devel@alsa-project.org
X-Mailman-Version: 2.1.15
Precedence: list
List-Id: "Alsa-devel mailing list for ALSA developers -
 http://www.alsa-project.org" <alsa-devel.alsa-project.org>
List-Unsubscribe: <https://mailman.alsa-project.org/mailman/options/alsa-devel>, 
 <mailto:alsa-devel-request@alsa-project.org?subject=unsubscribe>
List-Archive: <http://mailman.alsa-project.org/pipermail/alsa-devel/>
List-Post: <mailto:alsa-devel@alsa-project.org>
List-Help: <mailto:alsa-devel-request@alsa-project.org?subject=help>
List-Subscribe: <https://mailman.alsa-project.org/mailman/listinfo/alsa-devel>, 
 <mailto:alsa-devel-request@alsa-project.org?subject=subscribe>
Errors-To: alsa-devel-bounces@alsa-project.org
Sender: "Alsa-devel" <alsa-devel-bounces@alsa-project.org>


Hi Sameer
Cc Mark

Thank you for your feedback

> > Current audio-graph-card driver has DPCM support,
> > but it is limited (= Mix/Mux/TDM-split/rate-convert/channel-convert).
> > It was expanded forcibly expanded.
> 
> Yes it appears to be so. Right now it does not seem to be supporting
> 'demux' kind of use case.

I'm not sure how to do demux.
By DPCM ? by multi-Codec ?
I'm happy to consider it if there was sample code.

> Please note that asoc_simple_init_dai_link_params() makes the link
> codec-to-codec if any component involved has 'non_legacy_dai_naming'
> flag enabled. It is used by both audio-graph and simple-card. So it is
> a combination of three (DPCM, normal and codec-to-codec). To avoid all
> this complication, I am treating all links as DPCM in the series [0] I
> sent.

Ahh, we want to consider codec-to-codec..
And I noticed multi-CPU / multi-Codec case too (= for normal connection).
Do we have sample code ? > Mark

> If we encode use case information in DT, it would become regid and is
> not flexible when the HW is giving us the all flexibility (at least in
> my case). Thus may lead to complications. If there is a way to
> configure PCM parameters from the user space it would help to simplify
> things. Then DT can just describe the HW links.

What kind of PCM parameters you want to get from user-space ?



Mark, this is question from me.
In my understanding,
CPU - Codec are merging each parameter automatically at runtime,
for example rates / channels / formats (= snd_soc_runtime_calc_hw()).
And system-clock / TDM-slot / DAI-format are specified via Sound Card.

I can understand that system-clock is specified via Sound Card,
but TDM-slot / DAI-format can be adjusted from CPU / Codec driver
automatically same as rates / channels / formats ?
I'm not sure it is possible, or not, but I've been wondering for a long time.

Thank you for your help !!

Best regards
---
Kuninori Morimoto
