Return-Path: <alsa-devel-bounces@alsa-project.org>
X-Original-To: lists+alsa-devel@lfdr.de
Delivered-To: lists+alsa-devel@lfdr.de
Received: from alsa0.perex.cz (alsa0.perex.cz [77.48.224.243])
	by mail.lfdr.de (Postfix) with ESMTPS id 141B0481A89
	for <lists+alsa-devel@lfdr.de>; Thu, 30 Dec 2021 08:57:24 +0100 (CET)
Received: from alsa1.perex.cz (alsa1.perex.cz [207.180.221.201])
	(using TLSv1.2 with cipher AECDH-AES256-SHA (256/256 bits))
	(No client certificate requested)
	by alsa0.perex.cz (Postfix) with ESMTPS id 7912F172B;
	Thu, 30 Dec 2021 08:56:33 +0100 (CET)
DKIM-Filter: OpenDKIM Filter v2.11.0 alsa0.perex.cz 7912F172B
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/simple; d=alsa-project.org;
	s=default; t=1640851043;
	bh=4xYnAdHOPkWxpTwFLFaoqBSqtJJ9DfMDAhPpyiSGzvw=;
	h=Date:From:To:Subject:In-Reply-To:References:Cc:List-Id:
	 List-Unsubscribe:List-Archive:List-Post:List-Help:List-Subscribe:
	 From;
	b=gIJ10k2c3EKR4IejR6B/1aHuqQbYHMtFP08CDehWKd5Xrn74RNXagd8CM4jXkbKNL
	 4LN809r+hXkIWjbyW9geu1BTH8b2OAucc2SuZ+fH0CkfYPI8gpEY08iNtf3/pjse43
	 uYL8SmQCiLKJQIdqwaCbGgjKFL1ys3U1iaBMC2q4=
Received: from alsa1.perex.cz (localhost.localdomain [127.0.0.1])
	by alsa1.perex.cz (Postfix) with ESMTP id B36D6F800C9;
	Thu, 30 Dec 2021 08:56:16 +0100 (CET)
X-Original-To: alsa-devel@alsa-project.org
Delivered-To: alsa-devel@alsa-project.org
Received: by alsa1.perex.cz (Postfix, from userid 50401)
 id A8D7AF8012A; Thu, 30 Dec 2021 08:56:14 +0100 (CET)
X-Spam-Checker-Version: SpamAssassin 3.4.0 (2014-02-07) on alsa1.perex.cz
X-Spam-Level: 
X-Spam-Status: No, score=-0.1 required=5.0 tests=DKIM_SIGNED,DKIM_VALID,
 DKIM_VALID_AU,SPF_HELO_NONE,SPF_NONE autolearn=disabled version=3.4.0
Received: from smtp-out1.suse.de (smtp-out1.suse.de [195.135.220.28])
 (using TLSv1.2 with cipher ECDHE-RSA-AES128-GCM-SHA256 (128/128 bits))
 (No client certificate requested)
 by alsa1.perex.cz (Postfix) with ESMTPS id CE98FF800C9
 for <alsa-devel@alsa-project.org>; Thu, 30 Dec 2021 08:56:11 +0100 (CET)
DKIM-Filter: OpenDKIM Filter v2.11.0 alsa1.perex.cz CE98FF800C9
Authentication-Results: alsa1.perex.cz;
 dkim=pass (1024-bit key) header.d=suse.de header.i=@suse.de
 header.b="WS6riKN9"; 
 dkim=permerror (0-bit key) header.d=suse.de header.i=@suse.de
 header.b="XQvTABy7"
Received: from relay2.suse.de (relay2.suse.de [149.44.160.134])
 by smtp-out1.suse.de (Postfix) with ESMTP id 67D1521101;
 Thu, 30 Dec 2021 07:56:10 +0000 (UTC)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=suse.de; s=susede2_rsa;
 t=1640850970; h=from:from:reply-to:date:date:message-id:message-id:to:to:cc:cc:
 mime-version:mime-version:content-type:content-type:
 in-reply-to:in-reply-to:references:references;
 bh=kI7RlWLKZBCoBup3xYfD4BIj34mO5ObvZ9FFVtwc2vk=;
 b=WS6riKN9Ce9vp1a9wPM43nRs3Epgu1P4FyQYwJusNDfpAOQEDy9XrpU3P3edkhcEln6pY6
 dfueKrzCxF/4ByAAHGFQ6EJoxHCcphMtNd+RYidYQOMd+dxjQtjTB9MB8l3nwqkLYyxh4L
 IKnFnOXEheZRjk87t1j89VEBD9hIVmg=
DKIM-Signature: v=1; a=ed25519-sha256; c=relaxed/relaxed; d=suse.de;
 s=susede2_ed25519; t=1640850970;
 h=from:from:reply-to:date:date:message-id:message-id:to:to:cc:cc:
 mime-version:mime-version:content-type:content-type:
 in-reply-to:in-reply-to:references:references;
 bh=kI7RlWLKZBCoBup3xYfD4BIj34mO5ObvZ9FFVtwc2vk=;
 b=XQvTABy7og8MR8VZUSHa1gslDxRIhKPEqv9KJhc9YanhMDAcOV5CGDEHIhmIY0ViMWsbLo
 kGwDOiPqO2/wabDQ==
Received: from alsa1.suse.de (alsa1.suse.de [10.160.4.42])
 by relay2.suse.de (Postfix) with ESMTP id 7E46BA3B84;
 Thu, 30 Dec 2021 07:56:09 +0000 (UTC)
Date: Thu, 30 Dec 2021 08:56:09 +0100
Message-ID: <s5hwnjmo7ae.wl-tiwai@suse.de>
From: Takashi Iwai <tiwai@suse.de>
To: Rouven Czerwinski <rouven@czerwinskis.de>
Subject: Re: IOMMU Page Fault with Creative Soundblaster Zx after suspend
In-Reply-To: <87mtkjqvgj.fsf@czerwinskis.de>
References: <87mtkjqvgj.fsf@czerwinskis.de>
User-Agent: Wanderlust/2.15.9 (Almost Unreal) SEMI/1.14.6 (Maruoka)
 FLIM/1.14.9 (=?UTF-8?B?R29qxY0=?=) APEL/10.8 Emacs/25.3
 (x86_64-suse-linux-gnu) MULE/6.0 (HANACHIRUSATO)
MIME-Version: 1.0 (generated by SEMI 1.14.6 - "Maruoka")
Content-Type: text/plain; charset=US-ASCII
Cc: alsa-devel@alsa-project.org, Colin Ian King <colin.king@intel.com>,
 Takashi Iwai <tiwai@suse.com>, linux-kernel@vger.kernel.org,
 Pierre-Louis Bossart <pierre-louis.bossart@linux.intel.com>,
 Simeon Simeonoff <sim.simeonoff@gmail.com>
X-BeenThere: alsa-devel@alsa-project.org
X-Mailman-Version: 2.1.15
Precedence: list
List-Id: "Alsa-devel mailing list for ALSA developers -
 http://www.alsa-project.org" <alsa-devel.alsa-project.org>
List-Unsubscribe: <https://mailman.alsa-project.org/mailman/options/alsa-devel>, 
 <mailto:alsa-devel-request@alsa-project.org?subject=unsubscribe>
List-Archive: <http://mailman.alsa-project.org/pipermail/alsa-devel/>
List-Post: <mailto:alsa-devel@alsa-project.org>
List-Help: <mailto:alsa-devel-request@alsa-project.org?subject=help>
List-Subscribe: <https://mailman.alsa-project.org/mailman/listinfo/alsa-devel>, 
 <mailto:alsa-devel-request@alsa-project.org?subject=subscribe>
Errors-To: alsa-devel-bounces@alsa-project.org
Sender: "Alsa-devel" <alsa-devel-bounces@alsa-project.org>

On Wed, 29 Dec 2021 16:24:13 +0100,
Rouven Czerwinski wrote:
> 
> Hi,
> 
> With current 5.15.11, my soundblaster Zx is not correctly coming back
> from suspend. Dmesg prints:
> 
> [Mi Dez 29 16:12:14 2021] [drm] UVD and UVD ENC initialized successfully.
> [Mi Dez 29 16:12:14 2021] snd_hda_codec_ca0132 hdaudioC0D1: ca0132 DSP downloaded and running
> [Mi Dez 29 16:12:15 2021] [drm] VCE initialized successfully.
> [Mi Dez 29 16:12:15 2021] usb 1-5: reset full-speed USB device number 2 using xhci_hcd
> [Mi Dez 29 16:12:16 2021] ata1.00: Enabling discard_zeroes_data
> [Mi Dez 29 16:12:16 2021] OOM killer enabled.
> [Mi Dez 29 16:12:16 2021] Restarting tasks ... done.
> [Mi Dez 29 16:12:16 2021] PM: suspend exit
> [Mi Dez 29 16:12:16 2021] snd_hda_intel 0000:06:00.0: AMD-Vi: Event logged [IO_PAGE_FAULT domain=0x000f address=0xdf880000 flags=0x0000]
> [Mi Dez 29 16:12:17 2021] igb 0000:08:00.0 enp8s0: igb: enp8s0 NIC Link is Up 1000 Mbps Full Duplex, Flow Control: RX/TX
> 
> Where the IOMMU Page Fault looks suspicious. Unbinding and rebinding the
> driver using sysfs fixes it, thats the current workaround I have
> been using.

Is it a regression from the earlier releases?  If yes, please try to
narrow down the regression range, at least, which version started
showing the problem.  It'd be great if you can perform git bisection,
of course.


thanks,

Takashi
