Return-Path: <alsa-devel-bounces@alsa-project.org>
X-Original-To: lists+alsa-devel@lfdr.de
Delivered-To: lists+alsa-devel@lfdr.de
Received: from alsa0.perex.cz (alsa0.perex.cz [77.48.224.243])
	by mail.lfdr.de (Postfix) with ESMTPS id 118482B6688
	for <lists+alsa-devel@lfdr.de>; Tue, 17 Nov 2020 15:06:16 +0100 (CET)
Received: from alsa1.perex.cz (alsa1.perex.cz [207.180.221.201])
	(using TLSv1.2 with cipher AECDH-AES256-SHA (256/256 bits))
	(No client certificate requested)
	by alsa0.perex.cz (Postfix) with ESMTPS id 816671787;
	Tue, 17 Nov 2020 15:05:25 +0100 (CET)
DKIM-Filter: OpenDKIM Filter v2.11.0 alsa0.perex.cz 816671787
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/simple; d=alsa-project.org;
	s=default; t=1605621975;
	bh=6wChLOfGC5ucTJV42J3G+vPE9XLJ6N+LmdQxXfqrhPQ=;
	h=Date:From:To:Subject:In-Reply-To:References:Cc:List-Id:
	 List-Unsubscribe:List-Archive:List-Post:List-Help:List-Subscribe:
	 From;
	b=BnLO40AiwfOMPBi+2fVLx1a3LrXaofze4hw553Fy/HMkgd2YvdiZ88tbZtwacRpGp
	 XOLniTs9DMuYA9Cp0iHSvirlWu1ouq9pJT4xbkAR++QXk8p7fuxi6tL+9lTa2jzNzS
	 Lt3W+7UOh/5AIAtXI4XTeG/Rn/MJnuTIhzD31WnU=
Received: from alsa1.perex.cz (localhost.localdomain [127.0.0.1])
	by alsa1.perex.cz (Postfix) with ESMTP id 3E73FF801F9;
	Tue, 17 Nov 2020 15:04:43 +0100 (CET)
X-Original-To: alsa-devel@alsa-project.org
Delivered-To: alsa-devel@alsa-project.org
Received: by alsa1.perex.cz (Postfix, from userid 50401)
 id 715D4F801ED; Tue, 17 Nov 2020 15:04:40 +0100 (CET)
X-Spam-Checker-Version: SpamAssassin 3.4.0 (2014-02-07) on alsa1.perex.cz
X-Spam-Level: *
X-Spam-Status: No, score=1.0 required=5.0 tests=PRX_BODY_30, RCVD_IN_MSPIKE_H3,
 RCVD_IN_MSPIKE_WL,SPF_HELO_NONE,SPF_PASS autolearn=disabled version=3.4.0
Received: from mx2.suse.de (mx2.suse.de [195.135.220.15])
 (using TLSv1.2 with cipher AECDH-AES256-SHA (256/256 bits))
 (No client certificate requested)
 by alsa1.perex.cz (Postfix) with ESMTPS id A04A0F8010A
 for <alsa-devel@alsa-project.org>; Tue, 17 Nov 2020 15:04:32 +0100 (CET)
DKIM-Filter: OpenDKIM Filter v2.11.0 alsa1.perex.cz A04A0F8010A
X-Virus-Scanned: by amavisd-new at test-mx.suse.de
Received: from relay2.suse.de (unknown [195.135.221.27])
 by mx2.suse.de (Postfix) with ESMTP id AF79FAC1F;
 Tue, 17 Nov 2020 14:04:31 +0000 (UTC)
Date: Tue, 17 Nov 2020 15:04:31 +0100
Message-ID: <s5h1rgst6z4.wl-tiwai@suse.de>
From: Takashi Iwai <tiwai@suse.de>
To: Pierre-Louis Bossart <pierre-louis.bossart@linux.intel.com>
Subject: Re: [PATCH 00/14] ASoC: Intel/SOF: extend run-time driver selection
 to ACPI devices
In-Reply-To: <f62abcd8-b67f-774b-61b5-e08cfc3d2cc7@linux.intel.com>
References: <20201112223825.39765-1-pierre-louis.bossart@linux.intel.com>
 <0a0854d1ddaf4f9b81ef5569a7d501a5@intel.com>
 <20201113164946.GD4828@sirena.org.uk>
 <2cf7075b-bd51-21a5-2058-3a98e6c488a7@redhat.com>
 <d462c890495e4dda8698b5ba5eb50066@intel.com>
 <f62abcd8-b67f-774b-61b5-e08cfc3d2cc7@linux.intel.com>
User-Agent: Wanderlust/2.15.9 (Almost Unreal) SEMI/1.14.6 (Maruoka)
 FLIM/1.14.9 (=?UTF-8?B?R29qxY0=?=) APEL/10.8 Emacs/25.3
 (x86_64-suse-linux-gnu) MULE/6.0 (HANACHIRUSATO)
MIME-Version: 1.0 (generated by SEMI 1.14.6 - "Maruoka")
Content-Type: text/plain; charset=US-ASCII
Cc: Hans de Goede <hdegoede@redhat.com>, "Rojewski,
 Cezary" <cezary.rojewski@intel.com>, Mark Brown <broonie@kernel.org>,
 "alsa-devel@alsa-project.org" <alsa-devel@alsa-project.org>,
 "andriy.shevchenko@linux.intel.com" <andriy.shevchenko@linux.intel.com>
X-BeenThere: alsa-devel@alsa-project.org
X-Mailman-Version: 2.1.15
Precedence: list
List-Id: "Alsa-devel mailing list for ALSA developers -
 http://www.alsa-project.org" <alsa-devel.alsa-project.org>
List-Unsubscribe: <https://mailman.alsa-project.org/mailman/options/alsa-devel>, 
 <mailto:alsa-devel-request@alsa-project.org?subject=unsubscribe>
List-Archive: <http://mailman.alsa-project.org/pipermail/alsa-devel/>
List-Post: <mailto:alsa-devel@alsa-project.org>
List-Help: <mailto:alsa-devel-request@alsa-project.org?subject=help>
List-Subscribe: <https://mailman.alsa-project.org/mailman/listinfo/alsa-devel>, 
 <mailto:alsa-devel-request@alsa-project.org?subject=subscribe>
Errors-To: alsa-devel-bounces@alsa-project.org
Sender: "Alsa-devel" <alsa-devel-bounces@alsa-project.org>

On Mon, 16 Nov 2020 18:47:22 +0100,
Pierre-Louis Bossart wrote:
> 
> > Explicit 'ifs' asking whether we're dealing with SOF or other solution
> > is at best a code smell. I believe this is unnecessary complexity added
> > to the code especially once you realize user needs to play with module
> > parameters to switch between solutions. If we assume user is able to
> > play with module parameters then why not simply make use of blacklist
> > mechanism?
> 
> Been there, done that. We don't want to use either denylist of kernel
> parameters.
> 
> denylists create confusion for users, it's an endless stream of false
> errors and time lost in bug reports.
> 
> The use of the kernel parameter is ONLY for expert users who want to
> tinker with the system or debug issues, the average user should not
> have to play with either denylists or kernel parameters.

I guess Cezary mean the modprobe blacklist?  This was used in the
early stage of ASoC Skylake driver development, but in the end, it's
more cumbersome because user needs to change multiple places.  The
single module parameter was easier to handle.

> > And last but not least: intel-dsp-config is (as already stated) a mean
> > for solving the HDA-runtime-driver-selection problem. Mixing it with
> > ACPI devices is another layer of confusion.
> 
> Why? Who said it was PCI only? We already take care of DMIC,
> SoundWire, Google Chromebooks, open platforms, why not ACPI? It's just
> one API to be used when more than one driver can register to the same
> device.

Well, currently intel-dsp-config sits in sound/hda, which isn't really
intuitive.  Though, Intel driver file paths are already fairly
scattered, so it doesn't matter too much :)

I don't mind to move it to another directory, but which one...?
x86 might match, but shuffling the place won't help for maintenance.

I personally find this move good, at least it makes things easier for
distros.  There are small details like the above, but technically
seen, I see no big problem.


thanks,

Takashi
