Return-Path: <alsa-devel-bounces@alsa-project.org>
X-Original-To: lists+alsa-devel@lfdr.de
Delivered-To: lists+alsa-devel@lfdr.de
Received: from alsa0.perex.cz (alsa0.perex.cz [77.48.224.243])
	by mail.lfdr.de (Postfix) with ESMTPS id 99A6529E3A2
	for <lists+alsa-devel@lfdr.de>; Thu, 29 Oct 2020 08:06:25 +0100 (CET)
Received: from alsa1.perex.cz (alsa1.perex.cz [207.180.221.201])
	(using TLSv1.2 with cipher AECDH-AES256-SHA (256/256 bits))
	(No client certificate requested)
	by alsa0.perex.cz (Postfix) with ESMTPS id 2978E1612;
	Thu, 29 Oct 2020 08:05:35 +0100 (CET)
DKIM-Filter: OpenDKIM Filter v2.11.0 alsa0.perex.cz 2978E1612
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/simple; d=alsa-project.org;
	s=default; t=1603955185;
	bh=i88Z7f6xNOobKkXSl06lLzE2GHNPiepAp0wptcBb5G0=;
	h=Date:From:To:Subject:In-Reply-To:References:Cc:List-Id:
	 List-Unsubscribe:List-Archive:List-Post:List-Help:List-Subscribe:
	 From;
	b=BG4491X9Igby34d+9SgEZdfwOYvB10HmygiYwRVr/zdR6jWaixnxJwGaMdmRFNwaf
	 fqfd8cf/xmrH3C48p55ZWduDFrsMTpaPnpUioTIGqlPEc+CB1BQmVRSN4jAX+RfmsT
	 NoxJjx3e/a2YssBlAsHpsq1K0XvW/9P4QRVHJMgs=
Received: from alsa1.perex.cz (localhost.localdomain [127.0.0.1])
	by alsa1.perex.cz (Postfix) with ESMTP id 7BEBBF80217;
	Thu, 29 Oct 2020 08:04:52 +0100 (CET)
X-Original-To: alsa-devel@alsa-project.org
Delivered-To: alsa-devel@alsa-project.org
Received: by alsa1.perex.cz (Postfix, from userid 50401)
 id D5B01F8020D; Thu, 29 Oct 2020 08:04:49 +0100 (CET)
X-Spam-Checker-Version: SpamAssassin 3.4.0 (2014-02-07) on alsa1.perex.cz
X-Spam-Level: 
X-Spam-Status: No, score=0.0 required=5.0 tests=RCVD_IN_MSPIKE_H3,
 RCVD_IN_MSPIKE_WL,SPF_HELO_NONE,SPF_PASS autolearn=disabled version=3.4.0
Received: from mx2.suse.de (mx2.suse.de [195.135.220.15])
 (using TLSv1.2 with cipher AECDH-AES256-SHA (256/256 bits))
 (No client certificate requested)
 by alsa1.perex.cz (Postfix) with ESMTPS id 787BDF80095
 for <alsa-devel@alsa-project.org>; Thu, 29 Oct 2020 08:04:46 +0100 (CET)
DKIM-Filter: OpenDKIM Filter v2.11.0 alsa1.perex.cz 787BDF80095
X-Virus-Scanned: by amavisd-new at test-mx.suse.de
Received: from relay2.suse.de (unknown [195.135.221.27])
 by mx2.suse.de (Postfix) with ESMTP id 7F999ABF5;
 Thu, 29 Oct 2020 07:04:46 +0000 (UTC)
Date: Thu, 29 Oct 2020 08:04:46 +0100
Message-ID: <s5hsg9xwm0h.wl-tiwai@suse.de>
From: Takashi Iwai <tiwai@suse.de>
To: Kuninori Morimoto <kuninori.morimoto.gx@renesas.com>
Subject: Re: [PATCH 1/2] ASoC: soc-compress: tidyup STREAM vs COMPRESS
In-Reply-To: <87imatex9q.wl-kuninori.morimoto.gx@renesas.com>
References: <87wnzcfnkk.wl-kuninori.morimoto.gx@renesas.com>
 <87v9ewfnj9.wl-kuninori.morimoto.gx@renesas.com>
 <699d5b33-d88f-ba08-7d63-61ec9fbdc5d8@linux.intel.com>
 <87mu06djl8.wl-kuninori.morimoto.gx@renesas.com>
 <87imatex9q.wl-kuninori.morimoto.gx@renesas.com>
User-Agent: Wanderlust/2.15.9 (Almost Unreal) SEMI/1.14.6 (Maruoka)
 FLIM/1.14.9 (=?UTF-8?B?R29qxY0=?=) APEL/10.8 Emacs/25.3
 (x86_64-suse-linux-gnu) MULE/6.0 (HANACHIRUSATO)
MIME-Version: 1.0 (generated by SEMI 1.14.6 - "Maruoka")
Content-Type: text/plain; charset=US-ASCII
Cc: Linux-ALSA <alsa-devel@alsa-project.org>, Mark Brown <broonie@kernel.org>,
 Pierre-Louis Bossart <pierre-louis.bossart@linux.intel.com>
X-BeenThere: alsa-devel@alsa-project.org
X-Mailman-Version: 2.1.15
Precedence: list
List-Id: "Alsa-devel mailing list for ALSA developers -
 http://www.alsa-project.org" <alsa-devel.alsa-project.org>
List-Unsubscribe: <https://mailman.alsa-project.org/mailman/options/alsa-devel>, 
 <mailto:alsa-devel-request@alsa-project.org?subject=unsubscribe>
List-Archive: <http://mailman.alsa-project.org/pipermail/alsa-devel/>
List-Post: <mailto:alsa-devel@alsa-project.org>
List-Help: <mailto:alsa-devel-request@alsa-project.org?subject=help>
List-Subscribe: <https://mailman.alsa-project.org/mailman/listinfo/alsa-devel>, 
 <mailto:alsa-devel-request@alsa-project.org?subject=subscribe>
Errors-To: alsa-devel-bounces@alsa-project.org
Sender: "Alsa-devel" <alsa-devel-bounces@alsa-project.org>

On Thu, 29 Oct 2020 00:43:08 +0100,
Kuninori Morimoto wrote:
> 
> 
> Hi Pierre-Louis, again
> 
> > > enum snd_compr_direction {
> > > 	SND_COMPRESS_PLAYBACK = SNDRV_PCM_STREAM_PLAYBACK,
> > > 	SND_COMPRESS_CAPTURE = SNDRV_PCM_STREAM_CAPTURE
> > > };
> > > 
> > > Or remove this duplication completely and get rid of snd_compr_direction?
> > > 
> > > I find it odd to convert two things that had no reason to be different
> > > in the first place.
> > 
> > Yes I agree with you.
> > I'm not sure why this duplication was created,
> > but my patch tried to make it sane.
> > If Mark can agree, I can post snd_compr_direction remove patch.
> 
> Oops, snd_compr_direction was uapi.
> We can't remove it, and can't use your above suggestion...

Right, such uapi can't be removed.

Essentially both compress and PCM definitions are identical, and can
be never different because of ABI compatibility, which means it's safe
to mix both variants in the code.  If you're unsure, we may add
BUILD_BUG_ON() to check the coincidence of both values.


thanks,

Takashi
