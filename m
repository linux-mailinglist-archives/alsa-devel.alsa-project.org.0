Return-Path: <alsa-devel-bounces@alsa-project.org>
X-Original-To: lists+alsa-devel@lfdr.de
Delivered-To: lists+alsa-devel@lfdr.de
Received: from alsa0.perex.cz (alsa0.perex.cz [77.48.224.243])
	by mail.lfdr.de (Postfix) with ESMTPS id D07B4FC724
	for <lists+alsa-devel@lfdr.de>; Thu, 14 Nov 2019 14:16:24 +0100 (CET)
Received: from alsa1.perex.cz (alsa1.perex.cz [207.180.221.201])
	(using TLSv1.2 with cipher AECDH-AES256-SHA (256/256 bits))
	(No client certificate requested)
	by alsa0.perex.cz (Postfix) with ESMTPS id 2878C165E;
	Thu, 14 Nov 2019 14:15:34 +0100 (CET)
DKIM-Filter: OpenDKIM Filter v2.11.0 alsa0.perex.cz 2878C165E
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/simple; d=alsa-project.org;
	s=default; t=1573737384;
	bh=WAaIWphDk6anamaOUUeV8AtVZg0Laf8UsqvzDCfiYys=;
	h=Date:From:To:In-Reply-To:References:Cc:Subject:List-Id:
	 List-Unsubscribe:List-Archive:List-Post:List-Help:List-Subscribe:
	 From;
	b=U4SylY2rBWysL0BUFO/mtkmkCkhkTljV/d6yZLO3rrhOaxvbPtmIdS/4TGtlE0DyX
	 kfWZSCgA7d2ujUNPrGpTXENocFrZR63KL3qekOU5aCoRLTg33bzJyAK29eYpSFRDuH
	 q7qGQsDVuxZ68H0M3hFFdQUu27YEQ9X0gjYzuYKc=
Received: from alsa1.perex.cz (localhost.localdomain [127.0.0.1])
	by alsa1.perex.cz (Postfix) with ESMTP id 83383F800CD;
	Thu, 14 Nov 2019 14:14:40 +0100 (CET)
X-Original-To: alsa-devel@alsa-project.org
Delivered-To: alsa-devel@alsa-project.org
Received: by alsa1.perex.cz (Postfix, from userid 50401)
 id C2BD9F800CF; Thu, 14 Nov 2019 14:14:37 +0100 (CET)
X-Spam-Checker-Version: SpamAssassin 3.4.0 (2014-02-07) on alsa1.perex.cz
X-Spam-Level: 
X-Spam-Status: No, score=0.0 required=5.0 tests=SPF_HELO_NONE,SPF_PASS
 autolearn=disabled version=3.4.0
Received: from mx1.suse.de (mx2.suse.de [195.135.220.15])
 (using TLSv1.2 with cipher AECDH-AES256-SHA (256/256 bits))
 (No client certificate requested)
 by alsa1.perex.cz (Postfix) with ESMTPS id 86579F80084
 for <alsa-devel@alsa-project.org>; Thu, 14 Nov 2019 14:14:35 +0100 (CET)
DKIM-Filter: OpenDKIM Filter v2.11.0 alsa1.perex.cz 86579F80084
X-Virus-Scanned: by amavisd-new at test-mx.suse.de
Received: from relay2.suse.de (unknown [195.135.220.254])
 by mx1.suse.de (Postfix) with ESMTP id 56BF3B20A;
 Thu, 14 Nov 2019 13:14:34 +0000 (UTC)
Date: Thu, 14 Nov 2019 14:14:34 +0100
Message-ID: <s5hd0dumwg5.wl-tiwai@suse.de>
From: Takashi Iwai <tiwai@suse.de>
To: Nikhil Mahale <nmahale@nvidia.com>
In-Reply-To: <9a6f7ac2-998f-23ff-c606-a780c4804eba@nvidia.com>
References: <20191114033704.18171-1-nmahale@nvidia.com>
 <20191114033704.18171-4-nmahale@nvidia.com>
 <s5ho8xen2s3.wl-tiwai@suse.de>
 <9a6f7ac2-998f-23ff-c606-a780c4804eba@nvidia.com>
User-Agent: Wanderlust/2.15.9 (Almost Unreal) SEMI/1.14.6 (Maruoka)
 FLIM/1.14.9 (=?UTF-8?B?R29qxY0=?=) APEL/10.8 Emacs/25.3
 (x86_64-suse-linux-gnu) MULE/6.0 (HANACHIRUSATO)
MIME-Version: 1.0 (generated by SEMI 1.14.6 - "Maruoka")
Cc: alsa-devel@alsa-project.org, tiwai@suse.com, aplattner@nvidia.com
Subject: Re: [alsa-devel] [PATCH v1 3/5] ALSA: hda - Add DP-MST conn list
	support
X-BeenThere: alsa-devel@alsa-project.org
X-Mailman-Version: 2.1.15
Precedence: list
List-Id: "Alsa-devel mailing list for ALSA developers -
 http://www.alsa-project.org" <alsa-devel.alsa-project.org>
List-Unsubscribe: <https://mailman.alsa-project.org/mailman/options/alsa-devel>, 
 <mailto:alsa-devel-request@alsa-project.org?subject=unsubscribe>
List-Archive: <http://mailman.alsa-project.org/pipermail/alsa-devel/>
List-Post: <mailto:alsa-devel@alsa-project.org>
List-Help: <mailto:alsa-devel-request@alsa-project.org?subject=help>
List-Subscribe: <https://mailman.alsa-project.org/mailman/listinfo/alsa-devel>, 
 <mailto:alsa-devel-request@alsa-project.org?subject=subscribe>
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: 7bit
Errors-To: alsa-devel-bounces@alsa-project.org
Sender: "Alsa-devel" <alsa-devel-bounces@alsa-project.org>

On Thu, 14 Nov 2019 12:47:36 +0100,
Nikhil Mahale wrote:
> 
> On 11/14/19 4:27 PM, Takashi Iwai wrote:
> > On Thu, 14 Nov 2019 04:37:02 +0100,
> > Nikhil Mahale wrote:
> >>
> >> Document change notification HDA040-A for the Intel High Definition
> >> Audio 1.0a specification introduces a Device Select verb for Digital
> >> Display Pin Widgets that are multi-stream capable. This verb selects
> >> a Device Entry that is used by subsequent Pin Widget verbs,
> >> including the Get Connection List Entry verb.
> >>
> >> This patch queries the current Device Select value, associates it
> >> with the connection list, and updates the connection list management
> >> code to consider dev_id along with nid.
> > 
> > I don't get why this is needed.  This is the list that is added only
> > from snd_hda_override_conn_list(), and you don't change that call
> > pattern, so dev_id is always zero.
> 
> In follow-on patch "ALSA: hda - Add DP-MST support for non-acomp codecs",
> hdmi_read_pin_conn() calls into snd_hda_set_dev_select() before
> running into code path -
>   
>   snd_hda_get_connections()
>    |-> snd_hda_get_conn_list()
>         |-> read_and_add_raw_conns()
>              |-> snd_hda_override_conn_list()
>                   |-> add_conn_list()
> 
> If I understand spec correctly, conn_list need to read/write/track
> along with device entry set into AC_VERB_SET_DEVICE_SEL verb, right?

AFAIK, the device connection list itself is same no matter which
device entry is.  The pin widget may choose the route per device
entry, but the available routes should be same.


Takashi
_______________________________________________
Alsa-devel mailing list
Alsa-devel@alsa-project.org
https://mailman.alsa-project.org/mailman/listinfo/alsa-devel
