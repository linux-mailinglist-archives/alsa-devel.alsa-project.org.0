Return-Path: <alsa-devel-bounces@alsa-project.org>
X-Original-To: lists+alsa-devel@lfdr.de
Delivered-To: lists+alsa-devel@lfdr.de
Received: from alsa0.perex.cz (alsa0.perex.cz [77.48.224.243])
	by mail.lfdr.de (Postfix) with ESMTPS id 5332722F744
	for <lists+alsa-devel@lfdr.de>; Mon, 27 Jul 2020 20:04:28 +0200 (CEST)
Received: from alsa1.perex.cz (alsa1.perex.cz [207.180.221.201])
	(using TLSv1.2 with cipher AECDH-AES256-SHA (256/256 bits))
	(No client certificate requested)
	by alsa0.perex.cz (Postfix) with ESMTPS id C19A416A1;
	Mon, 27 Jul 2020 20:03:37 +0200 (CEST)
DKIM-Filter: OpenDKIM Filter v2.11.0 alsa0.perex.cz C19A416A1
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/simple; d=alsa-project.org;
	s=default; t=1595873067;
	bh=eF5nbLQqVJkb873rnOjAvf28cbeK6oMWRpESDz/DHmY=;
	h=Date:From:To:Subject:In-Reply-To:References:Cc:List-Id:
	 List-Unsubscribe:List-Archive:List-Post:List-Help:List-Subscribe:
	 From;
	b=UOnt3YxdVceqToLX51toDh+0Qw38SJUeWbbvD9UCyM0YhQnV49vxbMg8sTdaFiRok
	 No3gknEEhHiH3cdBhT074XTMyPldiHclBGQWtvbrhpBTLMd+OiNHUvxO6ouducqrnB
	 CIHPWMnB/OKik2XCFKhJAYS/j1mhqnTrzZFJ7Gi8=
Received: from alsa1.perex.cz (localhost.localdomain [127.0.0.1])
	by alsa1.perex.cz (Postfix) with ESMTP id 1674DF80158;
	Mon, 27 Jul 2020 20:02:47 +0200 (CEST)
X-Original-To: alsa-devel@alsa-project.org
Delivered-To: alsa-devel@alsa-project.org
Received: by alsa1.perex.cz (Postfix, from userid 50401)
 id 1C2F1F80171; Mon, 27 Jul 2020 20:02:44 +0200 (CEST)
X-Spam-Checker-Version: SpamAssassin 3.4.0 (2014-02-07) on alsa1.perex.cz
X-Spam-Level: 
X-Spam-Status: No, score=-0.0 required=5.0 tests=RCVD_IN_MSPIKE_H3,
 RCVD_IN_MSPIKE_WL,SPF_HELO_NONE,SPF_PASS autolearn=disabled version=3.4.0
Received: from mx2.suse.de (mx2.suse.de [195.135.220.15])
 (using TLSv1.2 with cipher AECDH-AES256-SHA (256/256 bits))
 (No client certificate requested)
 by alsa1.perex.cz (Postfix) with ESMTPS id 50942F8013C
 for <alsa-devel@alsa-project.org>; Mon, 27 Jul 2020 20:02:33 +0200 (CEST)
DKIM-Filter: OpenDKIM Filter v2.11.0 alsa1.perex.cz 50942F8013C
X-Virus-Scanned: by amavisd-new at test-mx.suse.de
Received: from relay2.suse.de (unknown [195.135.221.27])
 by mx2.suse.de (Postfix) with ESMTP id E2A4DAEF8;
 Mon, 27 Jul 2020 18:02:43 +0000 (UTC)
Date: Mon, 27 Jul 2020 20:02:33 +0200
Message-ID: <s5hr1swj0p2.wl-tiwai@suse.de>
From: Takashi Iwai <tiwai@suse.de>
To: Andrey Konovalov <andreyknvl@google.com>
Subject: Re: /dev/sequencer descriptions
In-Reply-To: <CAAeHK+wM6_3tS9Of8GDpxGBX=XqHDTW042=EYbmagFaZ0o228Q@mail.gmail.com>
References: <CAAeHK+wM6_3tS9Of8GDpxGBX=XqHDTW042=EYbmagFaZ0o228Q@mail.gmail.com>
User-Agent: Wanderlust/2.15.9 (Almost Unreal) SEMI/1.14.6 (Maruoka)
 FLIM/1.14.9 (=?UTF-8?B?R29qxY0=?=) APEL/10.8 Emacs/25.3
 (x86_64-suse-linux-gnu) MULE/6.0 (HANACHIRUSATO)
MIME-Version: 1.0 (generated by SEMI 1.14.6 - "Maruoka")
Content-Type: text/plain; charset=US-ASCII
Cc: alsa-devel@alsa-project.org,
 Nazime Hande Harputluoglu <handeharputlu@google.com>,
 syzkaller <syzkaller@googlegroups.com>
X-BeenThere: alsa-devel@alsa-project.org
X-Mailman-Version: 2.1.15
Precedence: list
List-Id: "Alsa-devel mailing list for ALSA developers -
 http://www.alsa-project.org" <alsa-devel.alsa-project.org>
List-Unsubscribe: <https://mailman.alsa-project.org/mailman/options/alsa-devel>, 
 <mailto:alsa-devel-request@alsa-project.org?subject=unsubscribe>
List-Archive: <http://mailman.alsa-project.org/pipermail/alsa-devel/>
List-Post: <mailto:alsa-devel@alsa-project.org>
List-Help: <mailto:alsa-devel-request@alsa-project.org?subject=help>
List-Subscribe: <https://mailman.alsa-project.org/mailman/listinfo/alsa-devel>, 
 <mailto:alsa-devel-request@alsa-project.org?subject=subscribe>
Errors-To: alsa-devel-bounces@alsa-project.org
Sender: "Alsa-devel" <alsa-devel-bounces@alsa-project.org>

On Mon, 27 Jul 2020 19:47:54 +0200,
Andrey Konovalov wrote:
> 
> Hi Takashi,
> 
> We're working on syzkaller descriptions for /dev/sequencer [1], but
> have some troubles understanding its functionality. The main question
> is: is sound/synth/emux/ code reachable when tested in a VM (we're
> using QEMU with -soundhw all), or does it require some specific
> hardware to be present?

It's for Creative SoundBlaster EMU chips, and it needs the specific
hardware that isn't emulated, so far.

> In our setup (with Debian Stretch userspace image) we have
> /dev/sequencer with SNDRV_MINOR_OSS_SEQUENCER and /dev/sequencer2 with
> SNDRV_MINOR_OSS_MUSIC. For the former, there are no synth devices as
> reported by SNDCTL_SEQ_NRSYNTHS. For the latter, synth devices are
> there, but the load_patch() callback is not reachable as this check
> [2] fails.
> 
> Is that code impossible to test in a VM at all? Or are there some
> specific kernel options/drivers that need to be enabled?

Another possible device supporting the OSS sequencer is the old FM
OPL3.  But it seems also not properly implemented in QEMU (I see only
OPL2), unfortunately.


thanks,

Takashi
