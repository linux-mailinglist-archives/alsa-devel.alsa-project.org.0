Return-Path: <alsa-devel-bounces@alsa-project.org>
X-Original-To: lists+alsa-devel@lfdr.de
Delivered-To: lists+alsa-devel@lfdr.de
Received: from alsa0.perex.cz (alsa0.perex.cz [77.48.224.243])
	by mail.lfdr.de (Postfix) with ESMTPS id 401F42E8530
	for <lists+alsa-devel@lfdr.de>; Fri,  1 Jan 2021 18:25:56 +0100 (CET)
Received: from alsa1.perex.cz (alsa1.perex.cz [207.180.221.201])
	(using TLSv1.2 with cipher AECDH-AES256-SHA (256/256 bits))
	(No client certificate requested)
	by alsa0.perex.cz (Postfix) with ESMTPS id C0C1216BF;
	Fri,  1 Jan 2021 18:25:00 +0100 (CET)
DKIM-Filter: OpenDKIM Filter v2.11.0 alsa0.perex.cz C0C1216BF
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/simple; d=alsa-project.org;
	s=default; t=1609521950;
	bh=y8mBN0EXzbu2I5jcu8j1W3lpIP26qRFX0YsyR/KcAso=;
	h=Date:From:To:Subject:In-Reply-To:References:Cc:List-Id:
	 List-Unsubscribe:List-Archive:List-Post:List-Help:List-Subscribe:
	 From;
	b=QYOrUNDiVwoNRQQGkMy1bQ1fd6FYLw1bTZMfp8mFB6muFuWKu0/pAJrK5Z7J80tTZ
	 b5t0QDyDX5xPx/fMqxSuqetVHMKXrwuuq6nN2wpdt6/Fr2g44+p6tE8hBSipEzZxi1
	 KuxJI8sQcV71mAq3gBP5umUeX+o/+uUxUlRnD23U=
Received: from alsa1.perex.cz (localhost.localdomain [127.0.0.1])
	by alsa1.perex.cz (Postfix) with ESMTP id 21ECBF8012B;
	Fri,  1 Jan 2021 18:24:17 +0100 (CET)
X-Original-To: alsa-devel@alsa-project.org
Delivered-To: alsa-devel@alsa-project.org
Received: by alsa1.perex.cz (Postfix, from userid 50401)
 id 54DA4F801F5; Fri,  1 Jan 2021 18:24:15 +0100 (CET)
X-Spam-Checker-Version: SpamAssassin 3.4.0 (2014-02-07) on alsa1.perex.cz
X-Spam-Level: 
X-Spam-Status: No, score=0.0 required=5.0 tests=SPF_HELO_NONE,SPF_NONE
 autolearn=disabled version=3.4.0
Received: from mx2.suse.de (mx2.suse.de [195.135.220.15])
 (using TLSv1.2 with cipher AECDH-AES256-SHA (256/256 bits))
 (No client certificate requested)
 by alsa1.perex.cz (Postfix) with ESMTPS id 9265CF8012B
 for <alsa-devel@alsa-project.org>; Fri,  1 Jan 2021 18:24:11 +0100 (CET)
DKIM-Filter: OpenDKIM Filter v2.11.0 alsa1.perex.cz 9265CF8012B
X-Virus-Scanned: by amavisd-new at test-mx.suse.de
Received: from relay2.suse.de (unknown [195.135.221.27])
 by mx2.suse.de (Postfix) with ESMTP id C9D6BACBA;
 Fri,  1 Jan 2021 17:24:10 +0000 (UTC)
Date: Fri, 01 Jan 2021 18:24:10 +0100
Message-ID: <s5hwnwwa7ut.wl-tiwai@suse.de>
From: Takashi Iwai <tiwai@suse.de>
To: Christian Labisch <clnetbox@gmail.com>
Subject: Re: Haswell audio no longer working with new Catpt driver
In-Reply-To: <d206434bed33930cb54b643f3d1968cf21973167.camel@gmail.com>
References: <8b005c64fe129fc2a283da90b2949b1fcb42e8c2.camel@gmail.com>
 <1ad341b1b0e0eefb83d157ac24d162eaad53ab32.camel@gmail.com>
 <0111f282-f044-47ed-f93e-5a19de61bdce@metafoo.de>
 <088cd3b6ba6589266e316d6adcb76861edd18775.camel@gmail.com>
 <s5h1rf4c10a.wl-tiwai@suse.de>
 <1f5c37af35419358a8d7f22544490088675b2c3f.camel@gmail.com>
 <3dcc3129-aee5-0eea-0307-4eba7f03c0d6@metafoo.de>
 <d206434bed33930cb54b643f3d1968cf21973167.camel@gmail.com>
User-Agent: Wanderlust/2.15.9 (Almost Unreal) SEMI/1.14.6 (Maruoka)
 FLIM/1.14.9 (=?UTF-8?B?R29qxY0=?=) APEL/10.8 Emacs/25.3
 (x86_64-suse-linux-gnu) MULE/6.0 (HANACHIRUSATO)
MIME-Version: 1.0 (generated by SEMI 1.14.6 - "Maruoka")
Content-Type: text/plain; charset=US-ASCII
Cc: gregkh@linuxfoundation.org,
 "alsa-devel@alsa-project.org" <alsa-devel@alsa-project.org>,
 Lars-Peter Clausen <lars@metafoo.de>, Takashi Iwai <tiwai@suse.com>,
 amadeuszx.slawinski@linux.intel.com
X-BeenThere: alsa-devel@alsa-project.org
X-Mailman-Version: 2.1.15
Precedence: list
List-Id: "Alsa-devel mailing list for ALSA developers -
 http://www.alsa-project.org" <alsa-devel.alsa-project.org>
List-Unsubscribe: <https://mailman.alsa-project.org/mailman/options/alsa-devel>, 
 <mailto:alsa-devel-request@alsa-project.org?subject=unsubscribe>
List-Archive: <http://mailman.alsa-project.org/pipermail/alsa-devel/>
List-Post: <mailto:alsa-devel@alsa-project.org>
List-Help: <mailto:alsa-devel-request@alsa-project.org?subject=help>
List-Subscribe: <https://mailman.alsa-project.org/mailman/listinfo/alsa-devel>, 
 <mailto:alsa-devel-request@alsa-project.org?subject=subscribe>
Errors-To: alsa-devel-bounces@alsa-project.org
Sender: "Alsa-devel" <alsa-devel-bounces@alsa-project.org>

On Fri, 01 Jan 2021 14:40:39 +0100,
Christian Labisch wrote:
> 
> $ cat /sys/module/snd_hda_intel/parameters/power_save
> 0

Hm, then the best would be to run git bisect for spotting out the
breaking commit.  There has been no change in VIA codec driver at all
between v5.9 and v5.10, so the rest possibility is either in HD-audio
codec helper code or controller code (or both) -- if it's about the
changes in the sound driver.

Or you can try the oneliner below as a test shot; it might keep the
widget node power D0, which is currently the only possible appearance
of the difference between working and non-working cases.

BTW, please avoid top-posting.  It's confusing.


thanks,

Takashi

-- 8< --
--- a/sound/pci/hda/patch_via.c
+++ b/sound/pci/hda/patch_via.c
@@ -115,7 +115,7 @@ static struct via_spec *via_new_spec(struct hda_codec *codec)
 	spec->gen.keep_eapd_on = 1;
 	spec->gen.pcm_playback_hook = via_playback_pcm_hook;
 	spec->gen.add_stereo_mix_input = HDA_HINT_STEREO_MIX_AUTO;
-	codec->power_save_node = 1;
+	// codec->power_save_node = 1;
 	spec->gen.power_down_unused = 1;
 	codec->patch_ops = via_patch_ops;
 	return spec;
