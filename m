Return-Path: <alsa-devel-bounces@alsa-project.org>
X-Original-To: lists+alsa-devel@lfdr.de
Delivered-To: lists+alsa-devel@lfdr.de
Received: from alsa0.perex.cz (alsa0.perex.cz [77.48.224.243])
	by mail.lfdr.de (Postfix) with ESMTPS id D39A8319BC9
	for <lists+alsa-devel@lfdr.de>; Fri, 12 Feb 2021 10:25:37 +0100 (CET)
Received: from alsa1.perex.cz (alsa1.perex.cz [207.180.221.201])
	(using TLSv1.2 with cipher AECDH-AES256-SHA (256/256 bits))
	(No client certificate requested)
	by alsa0.perex.cz (Postfix) with ESMTPS id 5923C1709;
	Fri, 12 Feb 2021 10:24:47 +0100 (CET)
DKIM-Filter: OpenDKIM Filter v2.11.0 alsa0.perex.cz 5923C1709
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/simple; d=alsa-project.org;
	s=default; t=1613121937;
	bh=0fpxF5bEQgar/P9usg9ziXfhyWEk3ffkFK4DikfHMNE=;
	h=Date:From:To:Subject:In-Reply-To:References:Cc:List-Id:
	 List-Unsubscribe:List-Archive:List-Post:List-Help:List-Subscribe:
	 From;
	b=AOtHdUIgy8moVaO+9agmyeI/fswt1ckChP4mtP/O2+upwmU2uj3ynpvcenKltQMCW
	 0oFQDN+f1kcDSsRR+BPM1rIdj/H8maQfRkjyi2kd3eezldcslZacLCPy5XCWB22+Nw
	 kpq28UGYZ/ol8TsUq5qTmBMOnx5l8CNZdkq+tOW4=
Received: from alsa1.perex.cz (localhost.localdomain [127.0.0.1])
	by alsa1.perex.cz (Postfix) with ESMTP id 9B52BF8014D;
	Fri, 12 Feb 2021 10:24:05 +0100 (CET)
X-Original-To: alsa-devel@alsa-project.org
Delivered-To: alsa-devel@alsa-project.org
Received: by alsa1.perex.cz (Postfix, from userid 50401)
 id D02A2F8022B; Fri, 12 Feb 2021 10:24:03 +0100 (CET)
X-Spam-Checker-Version: SpamAssassin 3.4.0 (2014-02-07) on alsa1.perex.cz
X-Spam-Level: 
X-Spam-Status: No, score=0.0 required=5.0 tests=SPF_HELO_NONE,SPF_NONE
 autolearn=disabled version=3.4.0
Received: from mx2.suse.de (mx2.suse.de [195.135.220.15])
 (using TLSv1.2 with cipher AECDH-AES256-SHA (256/256 bits))
 (No client certificate requested)
 by alsa1.perex.cz (Postfix) with ESMTPS id ECAACF8014B
 for <alsa-devel@alsa-project.org>; Fri, 12 Feb 2021 10:23:57 +0100 (CET)
DKIM-Filter: OpenDKIM Filter v2.11.0 alsa1.perex.cz ECAACF8014B
X-Virus-Scanned: by amavisd-new at test-mx.suse.de
Received: from relay2.suse.de (unknown [195.135.221.27])
 by mx2.suse.de (Postfix) with ESMTP id 980FDB141;
 Fri, 12 Feb 2021 09:23:52 +0000 (UTC)
Date: Fri, 12 Feb 2021 10:23:52 +0100
Message-ID: <s5hblcpej13.wl-tiwai@suse.de>
From: Takashi Iwai <tiwai@suse.de>
To: Jaroslav Kysela <perex@perex.cz>
Subject: Re: [PATCH 0/5] ALSA: control - add generic LED trigger code
In-Reply-To: <3c84c275-0c62-d2f4-38ad-be6accb3b159@perex.cz>
References: <20210211111400.1131020-1-perex@perex.cz>
 <s5h1rdmfrvo.wl-tiwai@suse.de>
 <3c84c275-0c62-d2f4-38ad-be6accb3b159@perex.cz>
User-Agent: Wanderlust/2.15.9 (Almost Unreal) SEMI/1.14.6 (Maruoka)
 FLIM/1.14.9 (=?UTF-8?B?R29qxY0=?=) APEL/10.8 Emacs/25.3
 (x86_64-suse-linux-gnu) MULE/6.0 (HANACHIRUSATO)
MIME-Version: 1.0 (generated by SEMI 1.14.6 - "Maruoka")
Content-Type: text/plain; charset=US-ASCII
Cc: Hans de Goede <hdegoede@redhat.com>,
 ALSA development <alsa-devel@alsa-project.org>,
 Perry Yuan <Perry.Yuan@dell.com>
X-BeenThere: alsa-devel@alsa-project.org
X-Mailman-Version: 2.1.15
Precedence: list
List-Id: "Alsa-devel mailing list for ALSA developers -
 http://www.alsa-project.org" <alsa-devel.alsa-project.org>
List-Unsubscribe: <https://mailman.alsa-project.org/mailman/options/alsa-devel>, 
 <mailto:alsa-devel-request@alsa-project.org?subject=unsubscribe>
List-Archive: <http://mailman.alsa-project.org/pipermail/alsa-devel/>
List-Post: <mailto:alsa-devel@alsa-project.org>
List-Help: <mailto:alsa-devel-request@alsa-project.org?subject=help>
List-Subscribe: <https://mailman.alsa-project.org/mailman/listinfo/alsa-devel>, 
 <mailto:alsa-devel-request@alsa-project.org?subject=subscribe>
Errors-To: alsa-devel-bounces@alsa-project.org
Sender: "Alsa-devel" <alsa-devel-bounces@alsa-project.org>

On Thu, 11 Feb 2021 18:53:20 +0100,
Jaroslav Kysela wrote:
> 
> Dne 11. 02. 21 v 18:15 Takashi Iwai napsal(a):
> 
> >> Jaroslav Kysela (5):
> >>   ALSA: control - introduce snd_ctl_notify_one() helper
> >>   ALSA: control - add layer registration routines
> >>   ALSA: control - add generic LED trigger module as the new control
> >>     layer
> >>   ALSA: HDA - remove the custom implementation for the audio LED trigger
> >>   ALSA: control - add sysfs support to the LED trigger module
> 
> > One thing I still miss from the picture is how to deal with the case
> > like AMD ACP.  It has no mixer control to bundle with the LED trigger.
> > Your idea is to make a (dummy) user element and tie the LED trigger
> > with it?
> 
> Yes, the user-space code which guarantee the silence stream should create an
> user space control with the appropriate LED group access bits. The alsa-lib's
> softvol PCM plugin can do this silencing for example.

What control would it create?  In the case of softvol, it's a volume
control that really changes the volume.  For the mute LED, it's a
control turn on/off the mute?  If so, I wonder what makes better than
creating it from the kernel driver.  (Of course, we can list up like
"flexibility", etc, but it has a flip side of "complexity" and
"fragility"...)

> > Another slight concern is the possible regression: by moving the
> > mute-LED mode enum stuff into the sysfs, user will get
> > incompatibilities after the kernel update.  And it's not that trivial
> > to change the sysfs entry as default for each user.
> > It needs some detailed documentation or some temporary workaround
> > (e.g. keep providing the controls for now but warns if the value is
> > changed from the default value via the controls).
> 
> I don't think that we have a user space application which is using those
> controls (Pulseaudio or so..) in an abstract way. I think that it's really
> minor issue. We should probably concentrate for the main designed purpose
> (notify about the mute / silent state) and handle those add-on features as an
> experimental stuff.

I'm sure that there are users of the reverse mic-mute LED ("follow
capture" mode); the feature was added because of the explicit request
from my colleague, and this mode works no matter whether ALSA native
or PA is used.  Not sure about "on" and "off" mode; maybe there can be
some users who want to disable the LED.

But, yes, this is a minor issue and should be in a lower priority.
It's just as a reminder.


thanks,

Takashi
