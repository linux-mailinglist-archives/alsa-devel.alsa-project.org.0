Return-Path: <alsa-devel-bounces@alsa-project.org>
X-Original-To: lists+alsa-devel@lfdr.de
Delivered-To: lists+alsa-devel@lfdr.de
Received: from alsa0.perex.cz (alsa0.perex.cz [77.48.224.243])
	by mail.lfdr.de (Postfix) with ESMTPS id C5646204FA4
	for <lists+alsa-devel@lfdr.de>; Tue, 23 Jun 2020 12:56:12 +0200 (CEST)
Received: from alsa1.perex.cz (alsa1.perex.cz [207.180.221.201])
	(using TLSv1.2 with cipher AECDH-AES256-SHA (256/256 bits))
	(No client certificate requested)
	by alsa0.perex.cz (Postfix) with ESMTPS id B02A81773;
	Tue, 23 Jun 2020 12:55:21 +0200 (CEST)
DKIM-Filter: OpenDKIM Filter v2.11.0 alsa0.perex.cz B02A81773
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/simple; d=alsa-project.org;
	s=default; t=1592909771;
	bh=JzFkKJG1+uXeabzwz48rFzYmlA/XIE8DsvzGyfheUxo=;
	h=Date:From:To:Subject:In-Reply-To:References:Cc:List-Id:
	 List-Unsubscribe:List-Archive:List-Post:List-Help:List-Subscribe:
	 From;
	b=YFtSWHTBJaqW9pHQ4cjJhabc39PN57xIVhdqBOv9uzFKfavt5sdNmhZFcb16bARxH
	 cSGzJiNhDdhBa/dlCYS4ztydutWEeE0jNe8oG7K/jgQljzduMGkn/jCFS6QSz6ZLTt
	 THcpfh3ipbg9Zo7q/PIbGfYc4D6AUVPPqR6FAll8=
Received: from alsa1.perex.cz (localhost.localdomain [127.0.0.1])
	by alsa1.perex.cz (Postfix) with ESMTP id E7F97F800B2;
	Tue, 23 Jun 2020 12:54:30 +0200 (CEST)
X-Original-To: alsa-devel@alsa-project.org
Delivered-To: alsa-devel@alsa-project.org
Received: by alsa1.perex.cz (Postfix, from userid 50401)
 id 621BDF80234; Tue, 23 Jun 2020 12:54:27 +0200 (CEST)
X-Spam-Checker-Version: SpamAssassin 3.4.0 (2014-02-07) on alsa1.perex.cz
X-Spam-Level: 
X-Spam-Status: No, score=0.0 required=5.0 tests=RCVD_IN_MSPIKE_H3,
 RCVD_IN_MSPIKE_WL,SPF_HELO_NONE,SPF_PASS,URIBL_BLOCKED autolearn=disabled
 version=3.4.0
Received: from mx2.suse.de (mx2.suse.de [195.135.220.15])
 (using TLSv1.2 with cipher AECDH-AES256-SHA (256/256 bits))
 (No client certificate requested)
 by alsa1.perex.cz (Postfix) with ESMTPS id 7F821F800B2
 for <alsa-devel@alsa-project.org>; Tue, 23 Jun 2020 12:54:20 +0200 (CEST)
DKIM-Filter: OpenDKIM Filter v2.11.0 alsa1.perex.cz 7F821F800B2
X-Virus-Scanned: by amavisd-new at test-mx.suse.de
Received: from relay2.suse.de (unknown [195.135.221.27])
 by mx2.suse.de (Postfix) with ESMTP id 8E229AED9;
 Tue, 23 Jun 2020 10:54:19 +0000 (UTC)
Date: Tue, 23 Jun 2020 12:54:19 +0200
Message-ID: <s5hbllaoxwk.wl-tiwai@suse.de>
From: Takashi Iwai <tiwai@suse.de>
To: Mark Hills <mark@xwax.org>
Subject: Re: [PATCH 3/9] conf: Read a host-specific asoundrc
In-Reply-To: <20200622131515.23385-3-mark@xwax.org>
References: <2006221356390.20421@stax.localdomain>
 <20200622131515.23385-3-mark@xwax.org>
User-Agent: Wanderlust/2.15.9 (Almost Unreal) SEMI/1.14.6 (Maruoka)
 FLIM/1.14.9 (=?UTF-8?B?R29qxY0=?=) APEL/10.8 Emacs/25.3
 (x86_64-suse-linux-gnu) MULE/6.0 (HANACHIRUSATO)
MIME-Version: 1.0 (generated by SEMI 1.14.6 - "Maruoka")
Content-Type: text/plain; charset=US-ASCII
Cc: alsa-devel@alsa-project.org
X-BeenThere: alsa-devel@alsa-project.org
X-Mailman-Version: 2.1.15
Precedence: list
List-Id: "Alsa-devel mailing list for ALSA developers -
 http://www.alsa-project.org" <alsa-devel.alsa-project.org>
List-Unsubscribe: <https://mailman.alsa-project.org/mailman/options/alsa-devel>, 
 <mailto:alsa-devel-request@alsa-project.org?subject=unsubscribe>
List-Archive: <http://mailman.alsa-project.org/pipermail/alsa-devel/>
List-Post: <mailto:alsa-devel@alsa-project.org>
List-Help: <mailto:alsa-devel-request@alsa-project.org?subject=help>
List-Subscribe: <https://mailman.alsa-project.org/mailman/listinfo/alsa-devel>, 
 <mailto:alsa-devel-request@alsa-project.org?subject=subscribe>
Errors-To: alsa-devel-bounces@alsa-project.org
Sender: "Alsa-devel" <alsa-devel-bounces@alsa-project.org>

On Mon, 22 Jun 2020 15:15:09 +0200,
Mark Hills wrote:
> 
> On systems with a network mounted home directory this is thoroughly
> useful to allow for a core set of asoundrc settings, but with different
> settings on different hosts.
> 
> It's not possibly to implement this in our own asoundrc or local
> customisation, as it's too late. The installation file must be modified.
> 
> This is similar to ~/.Xdefaults-* on some systems.
> 
> Signed-off-by: Mark Hills <mark@xwax.org>

This kind of change popping up sometimes in the past, too, and I have
a mixed feeling whether to take such a change globally or not.

In one side, it can work, but OTOH, if you can deal with that detail,
you're certainly able to set up the environment variable easily, too.


thanks,

Takashi

> ---
>  src/conf/alsa.conf | 11 +++++++++++
>  1 file changed, 11 insertions(+)
> 
> diff --git a/src/conf/alsa.conf b/src/conf/alsa.conf
> index 18427ec6..4dae0e9c 100644
> --- a/src/conf/alsa.conf
> +++ b/src/conf/alsa.conf
> @@ -24,6 +24,17 @@
>  					"/alsa/asoundrc"
>  				]
>  			}
> +			{
> +				@func concat
> +				strings [
> +					"~/.asoundrc-"
> +					{
> +						@func getenv
> +						vars [ HOSTNAME ]
> +						default "localhost"
> +					}
> +				]
> +			}
>  		]
>  		errors false
>  	}
> -- 
> 2.17.5
> 
