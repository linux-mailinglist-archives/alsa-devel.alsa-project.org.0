Return-Path: <alsa-devel-bounces@alsa-project.org>
X-Original-To: lists+alsa-devel@lfdr.de
Delivered-To: lists+alsa-devel@lfdr.de
Received: from alsa0.perex.cz (alsa0.perex.cz [77.48.224.243])
	by mail.lfdr.de (Postfix) with ESMTPS id 8AEB11171E4
	for <lists+alsa-devel@lfdr.de>; Mon,  9 Dec 2019 17:35:40 +0100 (CET)
Received: from alsa1.perex.cz (alsa1.perex.cz [207.180.221.201])
	(using TLSv1.2 with cipher AECDH-AES256-SHA (256/256 bits))
	(No client certificate requested)
	by alsa0.perex.cz (Postfix) with ESMTPS id 05F741654;
	Mon,  9 Dec 2019 17:34:50 +0100 (CET)
DKIM-Filter: OpenDKIM Filter v2.11.0 alsa0.perex.cz 05F741654
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/simple; d=alsa-project.org;
	s=default; t=1575909340;
	bh=uz+B/QgKOz3Xj/lWldBo7JTlm1ywFzCQw27ryIyWMA8=;
	h=Date:From:To:In-Reply-To:References:Cc:Subject:List-Id:
	 List-Unsubscribe:List-Archive:List-Post:List-Help:List-Subscribe:
	 From;
	b=lpn51KdYm+kzn7ziJB0kkYSLNQomWQiZL8djyjvY/Z4aPZIsyDBKVUlAbN2YD22x6
	 CGgeqPQZO6Ze8NuWf8Jno2wr7XIJyMsgu9qg0biVIv92M96vFACTp5GCaF6BZZYai2
	 35m4X7jPYaMfY8V4TLw+zVi00m71IUca3edlxeZw=
Received: from alsa1.perex.cz (localhost.localdomain [127.0.0.1])
	by alsa1.perex.cz (Postfix) with ESMTP id 9B3ECF8011E;
	Mon,  9 Dec 2019 17:33:56 +0100 (CET)
X-Original-To: alsa-devel@alsa-project.org
Delivered-To: alsa-devel@alsa-project.org
Received: by alsa1.perex.cz (Postfix, from userid 50401)
 id A4BB9F80234; Mon,  9 Dec 2019 17:33:53 +0100 (CET)
X-Spam-Checker-Version: SpamAssassin 3.4.0 (2014-02-07) on alsa1.perex.cz
X-Spam-Level: 
X-Spam-Status: No, score=0.0 required=5.0 tests=SPF_HELO_NONE,SPF_PASS
 autolearn=disabled version=3.4.0
Received: from mx1.suse.de (mx2.suse.de [195.135.220.15])
 (using TLSv1.2 with cipher AECDH-AES256-SHA (256/256 bits))
 (No client certificate requested)
 by alsa1.perex.cz (Postfix) with ESMTPS id 6E984F8011E
 for <alsa-devel@alsa-project.org>; Mon,  9 Dec 2019 17:33:49 +0100 (CET)
DKIM-Filter: OpenDKIM Filter v2.11.0 alsa1.perex.cz 6E984F8011E
X-Virus-Scanned: by amavisd-new at test-mx.suse.de
Received: from relay2.suse.de (unknown [195.135.220.254])
 by mx1.suse.de (Postfix) with ESMTP id 80CF4AC2C;
 Mon,  9 Dec 2019 16:33:48 +0000 (UTC)
Date: Mon, 09 Dec 2019 17:33:48 +0100
Message-ID: <s5hv9qpcvbn.wl-tiwai@suse.de>
From: Takashi Iwai <tiwai@suse.de>
To: Chuhong Yuan <hslester96@gmail.com>
In-Reply-To: <20191209162119.14820-1-hslester96@gmail.com>
References: <20191209162119.14820-1-hslester96@gmail.com>
User-Agent: Wanderlust/2.15.9 (Almost Unreal) SEMI/1.14.6 (Maruoka)
 FLIM/1.14.9 (=?UTF-8?B?R29qxY0=?=) APEL/10.8 Emacs/25.3
 (x86_64-suse-linux-gnu) MULE/6.0 (HANACHIRUSATO)
MIME-Version: 1.0 (generated by SEMI 1.14.6 - "Maruoka")
Cc: linux-kernel@vger.kernel.org, alsa-devel@alsa-project.org,
 Takashi Iwai <tiwai@suse.com>
Subject: Re: [alsa-devel] [PATCH] ALSA: hda/ca0132 - add missed
	snd_hda_gen_parse_auto_config
X-BeenThere: alsa-devel@alsa-project.org
X-Mailman-Version: 2.1.15
Precedence: list
List-Id: "Alsa-devel mailing list for ALSA developers -
 http://www.alsa-project.org" <alsa-devel.alsa-project.org>
List-Unsubscribe: <https://mailman.alsa-project.org/mailman/options/alsa-devel>, 
 <mailto:alsa-devel-request@alsa-project.org?subject=unsubscribe>
List-Archive: <http://mailman.alsa-project.org/pipermail/alsa-devel/>
List-Post: <mailto:alsa-devel@alsa-project.org>
List-Help: <mailto:alsa-devel-request@alsa-project.org?subject=help>
List-Subscribe: <https://mailman.alsa-project.org/mailman/listinfo/alsa-devel>, 
 <mailto:alsa-devel-request@alsa-project.org?subject=subscribe>
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: 7bit
Errors-To: alsa-devel-bounces@alsa-project.org
Sender: "Alsa-devel" <alsa-devel-bounces@alsa-project.org>

On Mon, 09 Dec 2019 17:21:19 +0100,
Chuhong Yuan wrote:
> 
> It is found that all usages of snd_hda_parse_pin_defcfg() are followed
> with snd_hda_gen_parse_auto_config() except here.
> This should be a miss and needs to add the missed call.

No, this will break things badly.

CA0132 codec driver has own configurator, and the pincfg parser is
called there because the initialization function requires the pincfg
information for the digital audio pins.


thanks,

Takashi


> 
> Signed-off-by: Chuhong Yuan <hslester96@gmail.com>
> ---
>  sound/pci/hda/patch_ca0132.c | 5 +++++
>  1 file changed, 5 insertions(+)
> 
> diff --git a/sound/pci/hda/patch_ca0132.c b/sound/pci/hda/patch_ca0132.c
> index b7a1abb3e231..ea1187a13241 100644
> --- a/sound/pci/hda/patch_ca0132.c
> +++ b/sound/pci/hda/patch_ca0132.c
> @@ -24,6 +24,7 @@
>  #include "hda_local.h"
>  #include "hda_auto_parser.h"
>  #include "hda_jack.h"
> +#include "hda_generic.h"
>  
>  #include "ca0132_regs.h"
>  
> @@ -8844,6 +8845,10 @@ static int patch_ca0132(struct hda_codec *codec)
>  	if (err < 0)
>  		goto error;
>  
> +	err = snd_hda_gen_parse_auto_config(codec, &spec->autocfg);
> +	if (err < 0)
> +		goto error;
> +
>  	return 0;
>  
>   error:
> -- 
> 2.24.0
> 
_______________________________________________
Alsa-devel mailing list
Alsa-devel@alsa-project.org
https://mailman.alsa-project.org/mailman/listinfo/alsa-devel
