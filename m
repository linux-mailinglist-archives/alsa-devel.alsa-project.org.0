Return-Path: <alsa-devel-bounces@alsa-project.org>
X-Original-To: lists+alsa-devel@lfdr.de
Delivered-To: lists+alsa-devel@lfdr.de
Received: from alsa0.perex.cz (alsa0.perex.cz [77.48.224.243])
	by mail.lfdr.de (Postfix) with ESMTPS id C642748622A
	for <lists+alsa-devel@lfdr.de>; Thu,  6 Jan 2022 10:35:13 +0100 (CET)
Received: from alsa1.perex.cz (alsa1.perex.cz [207.180.221.201])
	(using TLSv1.2 with cipher AECDH-AES256-SHA (256/256 bits))
	(No client certificate requested)
	by alsa0.perex.cz (Postfix) with ESMTPS id 476F517A9;
	Thu,  6 Jan 2022 10:34:23 +0100 (CET)
DKIM-Filter: OpenDKIM Filter v2.11.0 alsa0.perex.cz 476F517A9
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/simple; d=alsa-project.org;
	s=default; t=1641461713;
	bh=nUN1DaqTy6MeIRnwucS1feTcDrE6HEwt4Kz9i2UK5DA=;
	h=Date:From:To:Subject:In-Reply-To:References:Cc:List-Id:
	 List-Unsubscribe:List-Archive:List-Post:List-Help:List-Subscribe:
	 From;
	b=lJ20Hd5tgLcl23UbborrB1R4uzqsEUDDwDzJ0FmLucSa2zgJ/nOG2JJPyuF0ORF7s
	 fey87UArjzxSZ0NkZOCoSZsrG9/4sKCyZ07YyRVG7p8mfv5BqTNzmZNlVU28iKHhif
	 gNp/vckWSd+S+6j3c2LoLtwWhUB56p1RovwqTxDY=
Received: from alsa1.perex.cz (localhost.localdomain [127.0.0.1])
	by alsa1.perex.cz (Postfix) with ESMTP id A3C0BF80158;
	Thu,  6 Jan 2022 10:34:06 +0100 (CET)
X-Original-To: alsa-devel@alsa-project.org
Delivered-To: alsa-devel@alsa-project.org
Received: by alsa1.perex.cz (Postfix, from userid 50401)
 id 2BC3CF80155; Thu,  6 Jan 2022 10:34:05 +0100 (CET)
X-Spam-Checker-Version: SpamAssassin 3.4.0 (2014-02-07) on alsa1.perex.cz
X-Spam-Level: 
X-Spam-Status: No, score=-0.1 required=5.0 tests=DKIM_SIGNED,DKIM_VALID,
 DKIM_VALID_AU,SPF_HELO_NONE,SPF_NONE autolearn=disabled version=3.4.0
Received: from smtp-out1.suse.de (smtp-out1.suse.de [195.135.220.28])
 (using TLSv1.2 with cipher ECDHE-RSA-AES128-GCM-SHA256 (128/128 bits))
 (No client certificate requested)
 by alsa1.perex.cz (Postfix) with ESMTPS id D2FA3F800BB
 for <alsa-devel@alsa-project.org>; Thu,  6 Jan 2022 10:34:02 +0100 (CET)
DKIM-Filter: OpenDKIM Filter v2.11.0 alsa1.perex.cz D2FA3F800BB
Authentication-Results: alsa1.perex.cz;
 dkim=pass (1024-bit key) header.d=suse.de header.i=@suse.de
 header.b="n5LD3yzG"; 
 dkim=permerror (0-bit key) header.d=suse.de header.i=@suse.de
 header.b="Vzodz3N+"
Received: from relay2.suse.de (relay2.suse.de [149.44.160.134])
 by smtp-out1.suse.de (Postfix) with ESMTP id 4E3AF21117;
 Thu,  6 Jan 2022 09:34:01 +0000 (UTC)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=suse.de; s=susede2_rsa;
 t=1641461641; h=from:from:reply-to:date:date:message-id:message-id:to:to:cc:cc:
 mime-version:mime-version:content-type:content-type:
 in-reply-to:in-reply-to:references:references;
 bh=0zxIfZmibHX/exQ0Rrvi3hxwdxSFLGsv3o1M5NyM+Tk=;
 b=n5LD3yzGprslziATi+axrddjcCrvMseufaFwcmmUO595kc4qdEBQUNg+SW3faFf0Ob1tf/
 vcGieSCvkNUXRWFt4vvirHLKfX9B5NAPtP4xLdAImCrOcQ3l9glXNFN+4268HEkHxX7tha
 I41ZFK+I9VEt+u0+2cUKEF5MWIqSLDI=
DKIM-Signature: v=1; a=ed25519-sha256; c=relaxed/relaxed; d=suse.de;
 s=susede2_ed25519; t=1641461641;
 h=from:from:reply-to:date:date:message-id:message-id:to:to:cc:cc:
 mime-version:mime-version:content-type:content-type:
 in-reply-to:in-reply-to:references:references;
 bh=0zxIfZmibHX/exQ0Rrvi3hxwdxSFLGsv3o1M5NyM+Tk=;
 b=Vzodz3N+QvYbmJrobQp7Ax8IHbyzWRnBC7qh8ML7LjWlgkLJr+RaH1mEOOrJ8c4B7IsNQf
 kUMv+BEXDilkceBg==
Received: from alsa1.suse.de (alsa1.suse.de [10.160.4.42])
 by relay2.suse.de (Postfix) with ESMTP id 23021A3B81;
 Thu,  6 Jan 2022 09:34:01 +0000 (UTC)
Date: Thu, 06 Jan 2022 10:34:01 +0100
Message-ID: <s5hr19lgqd2.wl-tiwai@suse.de>
From: Takashi Iwai <tiwai@suse.de>
To: Jiasheng Jiang <jiasheng@iscas.ac.cn>
Subject: Re: [PATCH] ALSA: intel_hdmi: Check for error num after setting mask
In-Reply-To: <20220106084110.2691207-1-jiasheng@iscas.ac.cn>
References: <20220106084110.2691207-1-jiasheng@iscas.ac.cn>
User-Agent: Wanderlust/2.15.9 (Almost Unreal) SEMI/1.14.6 (Maruoka)
 FLIM/1.14.9 (=?UTF-8?B?R29qxY0=?=) APEL/10.8 Emacs/25.3
 (x86_64-suse-linux-gnu) MULE/6.0 (HANACHIRUSATO)
MIME-Version: 1.0 (generated by SEMI 1.14.6 - "Maruoka")
Content-Type: text/plain; charset=US-ASCII
Cc: alsa-devel@alsa-project.org, leon@kernel.org, linux-kernel@vger.kernel.org,
 tiwai@suse.com, broonie@kernel.org, joe@perches.com
X-BeenThere: alsa-devel@alsa-project.org
X-Mailman-Version: 2.1.15
Precedence: list
List-Id: "Alsa-devel mailing list for ALSA developers -
 http://www.alsa-project.org" <alsa-devel.alsa-project.org>
List-Unsubscribe: <https://mailman.alsa-project.org/mailman/options/alsa-devel>, 
 <mailto:alsa-devel-request@alsa-project.org?subject=unsubscribe>
List-Archive: <http://mailman.alsa-project.org/pipermail/alsa-devel/>
List-Post: <mailto:alsa-devel@alsa-project.org>
List-Help: <mailto:alsa-devel-request@alsa-project.org?subject=help>
List-Subscribe: <https://mailman.alsa-project.org/mailman/listinfo/alsa-devel>, 
 <mailto:alsa-devel-request@alsa-project.org?subject=subscribe>
Errors-To: alsa-devel-bounces@alsa-project.org
Sender: "Alsa-devel" <alsa-devel-bounces@alsa-project.org>

On Thu, 06 Jan 2022 09:41:10 +0100,
Jiasheng Jiang wrote:
> 
> On Thu, Jan 06, 2022 at 04:18:01PM +0800, Takashi Iwai wrote:
> > Well, 32bit DMA mask practically never fails on x86 (and other
> > architectures, IIRC).  It's fine to add a sanity check, but it's
> > better to be mentioned that it never fails.
> 
> Actually, I have already found many place check the 32bit DMA mask.
> For example:
> snd_ad1889_create() in `sound/pci/ad1889.c`, 
> snd_vortex_create() in `sound/pci/au88x0/au88x0.c`
> tegra_pcm_dma_allocate() in `sound/soc/tegra/tegra_pcm.c`.
> Therefore, I think there must be some reason that 32bit may fail.
> So, to make the system more robust, it should be better to add the
> sanity check.

Yes, as mentioned, it's fine to add a sanity check, but it's rather
for consistency of the code, not actually fixing any real issue.
At least it's better to rephrase the commit message for avoiding
confusion for readers.


thanks,

Takashi
