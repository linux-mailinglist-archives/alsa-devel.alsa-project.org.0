Return-Path: <alsa-devel-bounces@alsa-project.org>
X-Original-To: lists+alsa-devel@lfdr.de
Delivered-To: lists+alsa-devel@lfdr.de
Received: from alsa0.perex.cz (alsa0.perex.cz [77.48.224.243])
	by mail.lfdr.de (Postfix) with ESMTPS id B403459459
	for <lists+alsa-devel@lfdr.de>; Fri, 28 Jun 2019 08:45:44 +0200 (CEST)
Received: from alsa1.perex.cz (alsa1.perex.cz [207.180.221.201])
	(using TLSv1.2 with cipher AECDH-AES256-SHA (256/256 bits))
	(No client certificate requested)
	by alsa0.perex.cz (Postfix) with ESMTPS id D858E1683;
	Fri, 28 Jun 2019 08:44:53 +0200 (CEST)
DKIM-Filter: OpenDKIM Filter v2.11.0 alsa0.perex.cz D858E1683
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/simple; d=alsa-project.org;
	s=default; t=1561704344;
	bh=MNtVFtUUtd57Y8rRbVA+HxQm2aYWJH5ekx3oDolBE4M=;
	h=Date:From:To:In-Reply-To:References:Cc:Subject:List-Id:
	 List-Unsubscribe:List-Archive:List-Post:List-Help:List-Subscribe:
	 From;
	b=oGhhe3jADvcG88dKD1VYPL9NhdC8WxteODC6Fv1DbIe6DgJ52bGubygtzQ3iP4TlK
	 /g1NKq3Nwz+V8MHo21sSdUId1mn9XUI2+D37AeGt65qnf8lEbulRKLObN1MQ8YlBbo
	 NGv/cQd2YjD/f9w/rVoWp7K6ZUbE7I/3qwvZ2Ly4=
Received: from alsa1.perex.cz (localhost.localdomain [127.0.0.1])
	by alsa1.perex.cz (Postfix) with ESMTP id C8344F896B7;
	Fri, 28 Jun 2019 08:43:58 +0200 (CEST)
X-Original-To: alsa-devel@alsa-project.org
Delivered-To: alsa-devel@alsa-project.org
Received: by alsa1.perex.cz (Postfix, from userid 50401)
 id A0B82F896B9; Fri, 28 Jun 2019 08:43:55 +0200 (CEST)
X-Spam-Checker-Version: SpamAssassin 3.4.0 (2014-02-07) on alsa1.perex.cz
X-Spam-Level: 
X-Spam-Status: No, score=0.0 required=5.0 tests=SPF_HELO_NONE,SPF_PASS
 autolearn=disabled version=3.4.0
Received: from relmlie6.idc.renesas.com (relmlor2.renesas.com
 [210.160.252.172])
 by alsa1.perex.cz (Postfix) with ESMTP id CAB57F80768
 for <alsa-devel@alsa-project.org>; Fri, 28 Jun 2019 08:43:49 +0200 (CEST)
DKIM-Filter: OpenDKIM Filter v2.11.0 alsa1.perex.cz CAB57F80768
Date: 28 Jun 2019 15:43:47 +0900
X-IronPort-AV: E=Sophos;i="5.62,426,1554735600"; d="scan'208";a="19745182"
Received: from unknown (HELO relmlir6.idc.renesas.com) ([10.200.68.152])
 by relmlie6.idc.renesas.com with ESMTP; 28 Jun 2019 15:43:47 +0900
Received: from morimoto-PC.renesas.com (unknown [10.166.18.140])
 by relmlir6.idc.renesas.com (Postfix) with ESMTP id C475E4152BF9;
 Fri, 28 Jun 2019 15:43:47 +0900 (JST)
Message-ID: <87blyirz3j.wl-kuninori.morimoto.gx@renesas.com>
From: Kuninori Morimoto <kuninori.morimoto.gx@renesas.com>
To: Pierre-Louis Bossart <pierre-louis.bossart@linux.intel.com>
In-Reply-To: <288441e7-eaa7-8005-4026-97c31125375b@linux.intel.com>
References: <87h893mkvi.wl-kuninori.morimoto.gx@renesas.com>
 <87sgsnfjge.wl-kuninori.morimoto.gx@renesas.com>
 <CAEnQRZBnvfuZDbnvbmqAavh9DAbA_EeRc6OuH6OOiR1WB4zUrg@mail.gmail.com>
 <8761d853-2b3f-7b26-0073-05d0c3ce1362@linux.intel.com>
 <87d0iytqi8.wl-kuninori.morimoto.gx@renesas.com>
 <288441e7-eaa7-8005-4026-97c31125375b@linux.intel.com>
User-Agent: Wanderlust/2.15.9 Emacs/24.5 Mule/6.0
MIME-Version: 1.0 (generated by SEMI-EPG 1.14.7 - "Harue")
Cc: Daniel Baluta <daniel.baluta@gmail.com>, "Sridharan,
 Ranjani" <ranjani.sridharan@intel.com>,
 Linux-ALSA <alsa-devel@alsa-project.org>, Liam Girdwood <lgirdwood@gmail.com>,
 paul.olaru@nxp.com, Mark Brown <broonie@kernel.org>,
 Daniel Baluta <daniel.baluta@nxp.com>
Subject: Re: [alsa-devel] [PATCH v2 116/146] ASoC: sof: use modern dai_link
	style
X-BeenThere: alsa-devel@alsa-project.org
X-Mailman-Version: 2.1.15
Precedence: list
List-Id: "Alsa-devel mailing list for ALSA developers -
 http://www.alsa-project.org" <alsa-devel.alsa-project.org>
List-Unsubscribe: <https://mailman.alsa-project.org/mailman/options/alsa-devel>, 
 <mailto:alsa-devel-request@alsa-project.org?subject=unsubscribe>
List-Archive: <http://mailman.alsa-project.org/pipermail/alsa-devel/>
List-Post: <mailto:alsa-devel@alsa-project.org>
List-Help: <mailto:alsa-devel-request@alsa-project.org?subject=help>
List-Subscribe: <https://mailman.alsa-project.org/mailman/listinfo/alsa-devel>, 
 <mailto:alsa-devel-request@alsa-project.org?subject=subscribe>
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: 7bit
Errors-To: alsa-devel-bounces@alsa-project.org
Sender: "Alsa-devel" <alsa-devel-bounces@alsa-project.org>


Hi Pierre-Louis

> > This is very impertinent comment, but it is possible to allow NULL platform
> > instead of dummy platform by this or similar code ?
> > I guess it is nice for SOF future.
> > I can't test and not familiar with SOF thought...
> > 
> > 	if (link->platforms)
> > 		link->platforms->name = dev_name(sdev->dev);
> 
> It's a good question. To be honest I don't fully understand what this
> 'platform' field is needed for... I was just trying to maintain
> 'as-is' functionality. If anyone has a good explanation on when this
> field might be required and for what purpose, and when it can be made
> optional, I am all ears.

I can try to explain.

Originally "Platform" component is for "DMA" transfer
(But I'm not sure detail. It had been exist when I started to work for ALSA SoC...)
But in many SoC, "CPU" component is doing it.
Some SoC needs special "Platform" in my understanding.

Before, if Card didn't select "Platform",
ALSA SoC had selects "dummy platform" automatically.

Today, if Card didn't select it,
ALSA SoC will just igore it.

I guess you added "dummy platform" patch because SOF had this code

	if (!link->platforms) {
		dev_err(...);
		...
	}
	
This come from my patch, but it is just wrong guess.
I don't remember why I did it, but I thought SOF has it.
I'm not familiar with SOF, but it can accept NULL Platform
if we can fix above code to like this ?

	if (link->platforms)
		link->platforms-> ...

But, selecting dummy Platforms itself is not wrong idea.
# 100% wrong idea was my patch orz

Thank you for your help !!
Best regards
---
Kuninori Morimoto
_______________________________________________
Alsa-devel mailing list
Alsa-devel@alsa-project.org
https://mailman.alsa-project.org/mailman/listinfo/alsa-devel
