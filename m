Return-Path: <alsa-devel-bounces@alsa-project.org>
X-Original-To: lists+alsa-devel@lfdr.de
Delivered-To: lists+alsa-devel@lfdr.de
Received: from alsa0.perex.cz (alsa0.perex.cz [77.48.224.243])
	by mail.lfdr.de (Postfix) with ESMTPS id A8962ADE48
	for <lists+alsa-devel@lfdr.de>; Mon,  9 Sep 2019 19:54:15 +0200 (CEST)
Received: from alsa1.perex.cz (alsa1.perex.cz [207.180.221.201])
	(using TLSv1.2 with cipher AECDH-AES256-SHA (256/256 bits))
	(No client certificate requested)
	by alsa0.perex.cz (Postfix) with ESMTPS id 31E32166A;
	Mon,  9 Sep 2019 19:53:25 +0200 (CEST)
DKIM-Filter: OpenDKIM Filter v2.11.0 alsa0.perex.cz 31E32166A
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/simple; d=alsa-project.org;
	s=default; t=1568051655;
	bh=pInLExu4T6hTicJuWq2pteYZh0jtux5bwcWhe5AgdnM=;
	h=Date:From:To:In-Reply-To:References:Cc:Subject:List-Id:
	 List-Unsubscribe:List-Archive:List-Post:List-Help:List-Subscribe:
	 From;
	b=CcgA2yrnAx2A3qBABpWIXjg1qHTggEaNxPOoSyr5VoPBLWXrtbIlD3Luf5vv1pQGN
	 HDiJ10qTojEg1f0gNlwVJr4evQpau8Y542ePjanMy7hpsZIj7hVlIg/DMcdNRUH6oq
	 gd+uROQwJYNH0vQYT8OzG8elxNbJ90vjOMF6Ka5U=
Received: from alsa1.perex.cz (localhost.localdomain [127.0.0.1])
	by alsa1.perex.cz (Postfix) with ESMTP id BCC86F80323;
	Mon,  9 Sep 2019 19:52:30 +0200 (CEST)
X-Original-To: alsa-devel@alsa-project.org
Delivered-To: alsa-devel@alsa-project.org
Received: by alsa1.perex.cz (Postfix, from userid 50401)
 id 8A197F80323; Mon,  9 Sep 2019 19:52:28 +0200 (CEST)
X-Spam-Checker-Version: SpamAssassin 3.4.0 (2014-02-07) on alsa1.perex.cz
X-Spam-Level: 
X-Spam-Status: No, score=0.0 required=5.0 tests=SPF_HELO_NONE,SPF_PASS,
 URIBL_BLOCKED autolearn=disabled version=3.4.0
Received: from mx1.suse.de (mx2.suse.de [195.135.220.15])
 (using TLSv1.2 with cipher AECDH-AES256-SHA (256/256 bits))
 (No client certificate requested)
 by alsa1.perex.cz (Postfix) with ESMTPS id 229D7F800A9
 for <alsa-devel@alsa-project.org>; Mon,  9 Sep 2019 19:52:25 +0200 (CEST)
DKIM-Filter: OpenDKIM Filter v2.11.0 alsa1.perex.cz 229D7F800A9
X-Virus-Scanned: by amavisd-new at test-mx.suse.de
Received: from relay2.suse.de (unknown [195.135.220.254])
 by mx1.suse.de (Postfix) with ESMTP id 33E2AAE42;
 Mon,  9 Sep 2019 17:52:25 +0000 (UTC)
Date: Mon, 09 Sep 2019 19:52:24 +0200
Message-ID: <s5hv9u19x2f.wl-tiwai@suse.de>
From: Takashi Iwai <tiwai@suse.de>
To: frederik@ofb.net
In-Reply-To: <20190904164706.gwjbcywbj7emnwvr@localhost>
References: <20190904164706.gwjbcywbj7emnwvr@localhost>
User-Agent: Wanderlust/2.15.9 (Almost Unreal) SEMI/1.14.6 (Maruoka)
 FLIM/1.14.9 (=?UTF-8?B?R29qxY0=?=) APEL/10.8 Emacs/25.3
 (x86_64-suse-linux-gnu) MULE/6.0 (HANACHIRUSATO)
MIME-Version: 1.0 (generated by SEMI 1.14.6 - "Maruoka")
Cc: alsa-devel@alsa-project.org
Subject: Re: [alsa-devel] parameter for pulse device?
X-BeenThere: alsa-devel@alsa-project.org
X-Mailman-Version: 2.1.15
Precedence: list
List-Id: "Alsa-devel mailing list for ALSA developers -
 http://www.alsa-project.org" <alsa-devel.alsa-project.org>
List-Unsubscribe: <https://mailman.alsa-project.org/mailman/options/alsa-devel>, 
 <mailto:alsa-devel-request@alsa-project.org?subject=unsubscribe>
List-Archive: <http://mailman.alsa-project.org/pipermail/alsa-devel/>
List-Post: <mailto:alsa-devel@alsa-project.org>
List-Help: <mailto:alsa-devel-request@alsa-project.org?subject=help>
List-Subscribe: <https://mailman.alsa-project.org/mailman/listinfo/alsa-devel>, 
 <mailto:alsa-devel-request@alsa-project.org?subject=subscribe>
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: 7bit
Errors-To: alsa-devel-bounces@alsa-project.org
Sender: "Alsa-devel" <alsa-devel-bounces@alsa-project.org>

On Wed, 04 Sep 2019 18:47:06 +0200,
frederik@ofb.net wrote:
> 
> Dear ALSA,
> 
> In my ~/.asoundrc, I have lines like this:
> 
>    pcm.mic { type pulse; device "mic" }
>    pcm.monitor { type pulse; device "monitor"; }
>    pcm.music { type pulse; device "music"; }
> 
> to make it easier for ALSA-aware programs to input and output via PulseAudio, e.g.:
> 
>    ecasound -i alsa,mic -o alsa,monitor -etd:...
> 
> However, I would like to simplify this and not have to update ~/.asoundrc every time I create a new PulseAudio device. Since ALSA has the ability for PCMs to take a parameter, I thought this might work with the "pulse" PCM and the PulseAudio device name. But I get an "error: Invalid argument" when trying to pass the device name as an argument to the "pulse" PCM:
> 
>    $ ecasound -o alsa,pulse:music -i some.wav
>    ...
>    ALSA lib conf.c:5014:(snd_config_expand) Unknown parameters music
>    ALSA lib pcm.c:2564:(snd_pcm_open_noupdate) Unknown PCM pulse:music
>    ERROR:  Connecting chainsetup failed: "Enabling chainsetup: AUDIOIO-ALSA:
>    ... Unable to open ALSA-device for playback; error: Invalid argument"
> 
> Is there some magic with macros that I can use to accomplish this syntax, or can we add the ability for the "pulse" PCM to take a parameter naming the device?

It depends on how pcm.pulse is defined.  If it's defined to take an
argument, it can work like that.  (Or sometimes you may need to pass
the argument explicitly like "pulse:{device=mointor}".)

The standard pcm.pulse definition provided in alsa-plugins repo
doesn't take the argument, and that can be the reason.


Takashi
_______________________________________________
Alsa-devel mailing list
Alsa-devel@alsa-project.org
https://mailman.alsa-project.org/mailman/listinfo/alsa-devel
