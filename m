Return-Path: <alsa-devel-bounces@alsa-project.org>
X-Original-To: lists+alsa-devel@lfdr.de
Delivered-To: lists+alsa-devel@lfdr.de
Received: from alsa0.perex.cz (alsa0.perex.cz [77.48.224.243])
	by mail.lfdr.de (Postfix) with ESMTPS id 9EA22F27CE
	for <lists+alsa-devel@lfdr.de>; Thu,  7 Nov 2019 07:50:48 +0100 (CET)
Received: from alsa1.perex.cz (alsa1.perex.cz [207.180.221.201])
	(using TLSv1.2 with cipher AECDH-AES256-SHA (256/256 bits))
	(No client certificate requested)
	by alsa0.perex.cz (Postfix) with ESMTPS id 0BF7E1676;
	Thu,  7 Nov 2019 07:49:58 +0100 (CET)
DKIM-Filter: OpenDKIM Filter v2.11.0 alsa0.perex.cz 0BF7E1676
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/simple; d=alsa-project.org;
	s=default; t=1573109448;
	bh=iCsFS0roQ77794J1Qe+KIheGLnNA0XVukXtFyLEmKTY=;
	h=Date:From:To:In-Reply-To:References:Cc:Subject:List-Id:
	 List-Unsubscribe:List-Archive:List-Post:List-Help:List-Subscribe:
	 From;
	b=eXXq6K+K70/+bTlvr8fle2EiOiQtZ4o5VW4T8JNkcn1fgVWBk5DrirVju9JqcdKtW
	 yZqLqkXigbz06yZS8ZPapYF4xDxOFSmFkHFUQUlGXAqW51W17HGnTySu7R8FmNEAk6
	 YrL/RDq5RgvAXy09qfM1pT+zkq8yzaBS2cAstGqU=
Received: from alsa1.perex.cz (localhost.localdomain [127.0.0.1])
	by alsa1.perex.cz (Postfix) with ESMTP id 4E317F8049B;
	Thu,  7 Nov 2019 07:49:03 +0100 (CET)
X-Original-To: alsa-devel@alsa-project.org
Delivered-To: alsa-devel@alsa-project.org
Received: by alsa1.perex.cz (Postfix, from userid 50401)
 id DBDD6F8049B; Thu,  7 Nov 2019 07:48:59 +0100 (CET)
X-Spam-Checker-Version: SpamAssassin 3.4.0 (2014-02-07) on alsa1.perex.cz
X-Spam-Level: 
X-Spam-Status: No, score=0.0 required=5.0 tests=SPF_HELO_NONE,SPF_PASS
 autolearn=disabled version=3.4.0
Received: from mx1.suse.de (mx2.suse.de [195.135.220.15])
 (using TLSv1.2 with cipher AECDH-AES256-SHA (256/256 bits))
 (No client certificate requested)
 by alsa1.perex.cz (Postfix) with ESMTPS id 1BC70F800F3
 for <alsa-devel@alsa-project.org>; Thu,  7 Nov 2019 07:48:56 +0100 (CET)
DKIM-Filter: OpenDKIM Filter v2.11.0 alsa1.perex.cz 1BC70F800F3
X-Virus-Scanned: by amavisd-new at test-mx.suse.de
Received: from relay2.suse.de (unknown [195.135.220.254])
 by mx1.suse.de (Postfix) with ESMTP id 5B03CAF6B;
 Thu,  7 Nov 2019 06:48:55 +0000 (UTC)
Date: Thu, 07 Nov 2019 07:48:54 +0100
Message-ID: <s5ho8xo89m1.wl-tiwai@suse.de>
From: Takashi Iwai <tiwai@suse.de>
To: Jaroslav Kysela <perex@perex.cz>
In-Reply-To: <6dcc3e0d-0df5-90cf-220f-59253d3b5c7c@perex.cz>
References: <6dcc3e0d-0df5-90cf-220f-59253d3b5c7c@perex.cz>
User-Agent: Wanderlust/2.15.9 (Almost Unreal) SEMI/1.14.6 (Maruoka)
 FLIM/1.14.9 (=?UTF-8?B?R29qxY0=?=) APEL/10.8 Emacs/25.3
 (x86_64-suse-linux-gnu) MULE/6.0 (HANACHIRUSATO)
MIME-Version: 1.0 (generated by SEMI 1.14.6 - "Maruoka")
Cc: ALSA development <alsa-devel@alsa-project.org>,
 Mark Brown <broonie@kernel.org>, Kai Vehmanen <kai.vehmanen@linux.intel.com>
Subject: Re: [alsa-devel] UCM extensions
X-BeenThere: alsa-devel@alsa-project.org
X-Mailman-Version: 2.1.15
Precedence: list
List-Id: "Alsa-devel mailing list for ALSA developers -
 http://www.alsa-project.org" <alsa-devel.alsa-project.org>
List-Unsubscribe: <https://mailman.alsa-project.org/mailman/options/alsa-devel>, 
 <mailto:alsa-devel-request@alsa-project.org?subject=unsubscribe>
List-Archive: <http://mailman.alsa-project.org/pipermail/alsa-devel/>
List-Post: <mailto:alsa-devel@alsa-project.org>
List-Help: <mailto:alsa-devel-request@alsa-project.org?subject=help>
List-Subscribe: <https://mailman.alsa-project.org/mailman/listinfo/alsa-devel>, 
 <mailto:alsa-devel-request@alsa-project.org?subject=subscribe>
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: 7bit
Errors-To: alsa-devel-bounces@alsa-project.org
Sender: "Alsa-devel" <alsa-devel-bounces@alsa-project.org>

On Tue, 05 Nov 2019 20:36:28 +0100,
Jaroslav Kysela wrote:
> 
> Hi all,
> 
> 	I make some internal ucm code cleanups in alsa-lib and added
> three major extensions to allow more complex configurations which we
> require for the SOF kernel driver.
> 
> 	The first thing is the added substitution for the value strings:
> 
> https://github.com/alsa-project/alsa-lib/commit/f1e637b285e8e04e6761248a070f58f3a8fde6fc
> 
> 	The second thing is the If block:
> 
> https://github.com/alsa-project/alsa-lib/commit/985715ce8148dc7ef62c8e3d8ce5a0c2ac51f8df
> 
> 	The third thing is the card / hardware like specifier passed
> as the ucm name to snd_use_case_mgr_open() to support multiple card
> instances:
> 
> https://github.com/alsa-project/alsa-lib/commit/60164fc5886cdc6ca55eeed0c2e3f751a7d2b2c0
> 
> 	All those patches (with other cleanups) are in the ucm2 branch
> on github for comments:
> 
> https://github.com/alsa-project/alsa-lib/commits/ucm2
> 
> 	The proposed SOF UCM config diff is here:
> 
> https://github.com/alsa-project/alsa-ucm-conf/commit/723b6da881721488229154e923ed36413955a051
> https://github.com/alsa-project/alsa-ucm-conf/commits/ucm2
> 
> 	I added everything to keep the interface backward compatible,
> so the current applications should not observe any different
> behavior. The applications like pulseaudio should use the
> 'hw:CARD_INDEX' specifier for the open call in the future and
> snd_use_case_parse_ctl_elem_id() helper for the element control names.

The only concern with these extensions so far is the compatibility.
Imagine that people run the new profile on the old parser, it'd break
easily.

I think other scripts often installing on the versioned directory if
incompatibilities are seen.  Can we do that for UCM as well?

Or course, once after UCM parser is changed to be future-ready and
allow some syntax for possible future extensions, we can keep that
version directory in future, too.


thanks,

Takashi
_______________________________________________
Alsa-devel mailing list
Alsa-devel@alsa-project.org
https://mailman.alsa-project.org/mailman/listinfo/alsa-devel
