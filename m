Return-Path: <alsa-devel-bounces@alsa-project.org>
X-Original-To: lists+alsa-devel@lfdr.de
Delivered-To: lists+alsa-devel@lfdr.de
Received: from alsa0.perex.cz (alsa0.perex.cz [77.48.224.243])
	by mail.lfdr.de (Postfix) with ESMTPS id D7ACD5B16B6
	for <lists+alsa-devel@lfdr.de>; Thu,  8 Sep 2022 10:17:13 +0200 (CEST)
Received: from alsa1.perex.cz (alsa1.perex.cz [207.180.221.201])
	(using TLSv1.2 with cipher AECDH-AES256-SHA (256/256 bits))
	(No client certificate requested)
	by alsa0.perex.cz (Postfix) with ESMTPS id 235D516B5;
	Thu,  8 Sep 2022 10:16:23 +0200 (CEST)
DKIM-Filter: OpenDKIM Filter v2.11.0 alsa0.perex.cz 235D516B5
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/simple; d=alsa-project.org;
	s=default; t=1662625033;
	bh=0Xcy7Sb8S/Alyqf+xypoaKPuCwt1msXzuWAl9mSjqJM=;
	h=Date:From:To:Subject:In-Reply-To:References:Cc:List-Id:
	 List-Unsubscribe:List-Archive:List-Post:List-Help:List-Subscribe:
	 From;
	b=TmyJFtj4XuzCexzAYwDyc/FncdsoWly5t1LB8TF1RmZ62azP+Oi6i2HMielPt27W5
	 MFVsy9fRJFv8jYl9eAiFIPXgibMHXgZrrT/Q15nyiH3SIZW05pDE7MHYvcea2u2CeV
	 11J211Jbx0TV3ps8yqWwlIDCgAu7MeeQWlEwk0NM=
Received: from alsa1.perex.cz (localhost.localdomain [127.0.0.1])
	by alsa1.perex.cz (Postfix) with ESMTP id 92221F800CB;
	Thu,  8 Sep 2022 10:16:13 +0200 (CEST)
X-Original-To: alsa-devel@alsa-project.org
Delivered-To: alsa-devel@alsa-project.org
Received: by alsa1.perex.cz (Postfix, from userid 50401)
 id E77E9F800CB; Thu,  8 Sep 2022 10:16:11 +0200 (CEST)
X-Spam-Checker-Version: SpamAssassin 3.4.0 (2014-02-07) on alsa1.perex.cz
X-Spam-Level: 
X-Spam-Status: No, score=-0.1 required=5.0 tests=DKIM_SIGNED,DKIM_VALID,
 DKIM_VALID_AU,SPF_HELO_NONE,SPF_NONE,T_SCC_BODY_TEXT_LINE,URIBL_BLOCKED,
 URIBL_DBL_BLOCKED_OPENDNS autolearn=disabled version=3.4.0
Received: from smtp-out1.suse.de (smtp-out1.suse.de [195.135.220.28])
 (using TLSv1.2 with cipher ECDHE-RSA-AES128-GCM-SHA256 (128/128 bits))
 (No client certificate requested)
 by alsa1.perex.cz (Postfix) with ESMTPS id B8CF9F800CB
 for <alsa-devel@alsa-project.org>; Thu,  8 Sep 2022 10:16:03 +0200 (CEST)
DKIM-Filter: OpenDKIM Filter v2.11.0 alsa1.perex.cz B8CF9F800CB
Authentication-Results: alsa1.perex.cz;
 dkim=pass (1024-bit key) header.d=suse.de header.i=@suse.de
 header.b="RJEIcksQ"; 
 dkim=permerror (0-bit key) header.d=suse.de header.i=@suse.de
 header.b="egziTsF6"
Received: from imap2.suse-dmz.suse.de (imap2.suse-dmz.suse.de [192.168.254.74])
 (using TLSv1.3 with cipher TLS_AES_256_GCM_SHA384 (256/256 bits)
 key-exchange X25519 server-signature ECDSA (P-521) server-digest SHA512)
 (No client certificate requested)
 by smtp-out1.suse.de (Postfix) with ESMTPS id 659713449D;
 Thu,  8 Sep 2022 08:16:03 +0000 (UTC)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=suse.de; s=susede2_rsa;
 t=1662624963; h=from:from:reply-to:date:date:message-id:message-id:to:to:cc:cc:
 mime-version:mime-version:content-type:content-type:
 in-reply-to:in-reply-to:references:references;
 bh=arESGDH4tHKC/NAVP771DmFPNGw963e2VPRZVSwtGtU=;
 b=RJEIcksQsC+Au1sS6n+iICwJjDbanz7yvijO1jT0tO1jl5IZrbZ1O0VBRalAeChsI7onQW
 7r6shXJNCWxOk3nB3vp4buA2A05zNKhBcblYvwc9ED21E3TswHC3UnzvFgiSUJZBUSjmr5
 ilK7vXYII5zybyj+lIglrITHREGx/Xk=
DKIM-Signature: v=1; a=ed25519-sha256; c=relaxed/relaxed; d=suse.de;
 s=susede2_ed25519; t=1662624963;
 h=from:from:reply-to:date:date:message-id:message-id:to:to:cc:cc:
 mime-version:mime-version:content-type:content-type:
 in-reply-to:in-reply-to:references:references;
 bh=arESGDH4tHKC/NAVP771DmFPNGw963e2VPRZVSwtGtU=;
 b=egziTsF6yY5BzNTY7et7TGgHlE8iz1MjTu23yPugrIApYRxxoK2o2KfIUVbEtCHcfYeDv7
 o0TwcSNzM6DzfTDw==
Received: from imap2.suse-dmz.suse.de (imap2.suse-dmz.suse.de [192.168.254.74])
 (using TLSv1.3 with cipher TLS_AES_256_GCM_SHA384 (256/256 bits)
 key-exchange X25519 server-signature ECDSA (P-521) server-digest SHA512)
 (No client certificate requested)
 by imap2.suse-dmz.suse.de (Postfix) with ESMTPS id 441691322C;
 Thu,  8 Sep 2022 08:16:03 +0000 (UTC)
Received: from dovecot-director2.suse.de ([192.168.254.65])
 by imap2.suse-dmz.suse.de with ESMTPSA id wUTlD8OkGWMXJgAAMHmgww
 (envelope-from <tiwai@suse.de>); Thu, 08 Sep 2022 08:16:03 +0000
Date: Thu, 08 Sep 2022 10:16:02 +0200
Message-ID: <87r10mcmd9.wl-tiwai@suse.de>
From: Takashi Iwai <tiwai@suse.de>
To: YJ Lee <yunjunlee@chromium.org>
Subject: Re: About ALSA dummy module: support customized mixer volume leveling
In-Reply-To: <CAPm_npY3SkumWgy8EN65no2iQFj2KWG6pysUchEKHBBPZ9AHsA@mail.gmail.com>
References: <CAPm_npY3SkumWgy8EN65no2iQFj2KWG6pysUchEKHBBPZ9AHsA@mail.gmail.com>
User-Agent: Wanderlust/2.15.9 (Almost Unreal) Emacs/27.2 Mule/6.0
MIME-Version: 1.0 (generated by SEMI-EPG 1.14.7 - "Harue")
Content-Type: text/plain; charset=US-ASCII
Cc: alsa-devel@alsa-project.org, Ching Yun Chang <whalechang@google.com>,
 tiwai@suse.com, Yu-Hsuan Hsu <yuhsuan@chromium.org>
X-BeenThere: alsa-devel@alsa-project.org
X-Mailman-Version: 2.1.15
Precedence: list
List-Id: "Alsa-devel mailing list for ALSA developers -
 http://www.alsa-project.org" <alsa-devel.alsa-project.org>
List-Unsubscribe: <https://mailman.alsa-project.org/mailman/options/alsa-devel>, 
 <mailto:alsa-devel-request@alsa-project.org?subject=unsubscribe>
List-Archive: <http://mailman.alsa-project.org/pipermail/alsa-devel/>
List-Post: <mailto:alsa-devel@alsa-project.org>
List-Help: <mailto:alsa-devel-request@alsa-project.org?subject=help>
List-Subscribe: <https://mailman.alsa-project.org/mailman/listinfo/alsa-devel>, 
 <mailto:alsa-devel-request@alsa-project.org?subject=subscribe>
Errors-To: alsa-devel-bounces@alsa-project.org
Sender: "Alsa-devel" <alsa-devel-bounces@alsa-project.org>

On Thu, 08 Sep 2022 07:26:02 +0200,
YJ Lee wrote:
> 
> Hello Takashi (and the alsa community),
> 
> This is YJ Lee from chromium.org.
> 
> I'm thinking about extending the ALSA dummy module to support
> customized volume leveling. It will be very useful to test devices
> with different volume granularity. Currently this module is using
> hard-coded mixer volume leveling, from min=-50 to max=100.
> 
> See L716: https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux-stable-rc.git/tree/sound/drivers/dummy.c?h=queue/5.19#n716
> 
> My plan (A) is to expose 2 more additional module parameters and
> replace a few occurrences, from L742-750.
> 
> Another plan (B) is to leverage the current existing module
> parameter:model, and make the dummy-module to be able to accept models
> with customized volume leveling. New dummy models can be provided as
> configuration files, and be used in the same way as how currently
> existing dummy models (L146-213) are used. However, it's a bit
> over-engineering from the original purpose.
> 
> What do you think about these plans? Any insight you (and the alsa
> community) can provide will be greatly appreciated.

Only for volume min/max, module options may be an easier way, IMO.

OTOH, if we want to adjust more stuff, another possibility is to
extend the proc file.  It currently supports the dynamic changes of
PCM parameters, but we can extend it or add a new proc file for
adjusting other stuff, too.  So the question is what else we want to
allow changing.


thanks,

Takashi
