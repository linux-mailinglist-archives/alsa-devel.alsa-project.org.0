Return-Path: <alsa-devel-bounces@alsa-project.org>
X-Original-To: lists+alsa-devel@lfdr.de
Delivered-To: lists+alsa-devel@lfdr.de
Received: from alsa0.perex.cz (alsa0.perex.cz [77.48.224.243])
	by mail.lfdr.de (Postfix) with ESMTPS id BD2B922BC5
	for <lists+alsa-devel@lfdr.de>; Mon, 20 May 2019 08:03:39 +0200 (CEST)
Received: from alsa1.perex.cz (alsa1.perex.cz [207.180.221.201])
	(using TLSv1.2 with cipher AECDH-AES256-SHA (256/256 bits))
	(No client certificate requested)
	by alsa0.perex.cz (Postfix) with ESMTPS id 35BE31669;
	Mon, 20 May 2019 08:02:49 +0200 (CEST)
DKIM-Filter: OpenDKIM Filter v2.11.0 alsa0.perex.cz 35BE31669
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/simple; d=alsa-project.org;
	s=default; t=1558332219;
	bh=78zQQ5CXxLUXxKosu+K/M5Tw9UE9dblb5N2oHBqoBcU=;
	h=Date:From:To:In-Reply-To:References:Cc:Subject:List-Id:
	 List-Unsubscribe:List-Archive:List-Post:List-Help:List-Subscribe:
	 From;
	b=dO9rQZsCbjuWYpzMSulMZWf4iape0CHcH7w5ganOIxI2uTo7Qy8UdOaYCkeiYAeXp
	 TYknYzujNF8/fnJ+baBwmf8ebm4Jo542YsJiW8ACGrEUn8OyhMNosJ9zDvFBjgCpGP
	 2oXPbwlLxLW1F50x+jLVJXTbGEEfAOsvymZLsZws=
Received: from alsa1.perex.cz (localhost.localdomain [127.0.0.1])
	by alsa1.perex.cz (Postfix) with ESMTP id E5D27F80726;
	Mon, 20 May 2019 08:01:47 +0200 (CEST)
X-Original-To: alsa-devel@alsa-project.org
Delivered-To: alsa-devel@alsa-project.org
Received: by alsa1.perex.cz (Postfix, from userid 50401)
 id 6E2DBF8961D; Mon, 20 May 2019 07:58:06 +0200 (CEST)
Received: from mx1.suse.de (mx2.suse.de [195.135.220.15])
 (using TLSv1.2 with cipher AECDH-AES256-SHA (256/256 bits))
 (No client certificate requested)
 by alsa1.perex.cz (Postfix) with ESMTPS id 1C22DF806E7
 for <alsa-devel@alsa-project.org>; Mon, 20 May 2019 07:47:48 +0200 (CEST)
DKIM-Filter: OpenDKIM Filter v2.11.0 alsa1.perex.cz 1C22DF806E7
X-Virus-Scanned: by amavisd-new at test-mx.suse.de
Received: from relay2.suse.de (unknown [195.135.220.254])
 by mx1.suse.de (Postfix) with ESMTP id C3285AE4B;
 Mon, 20 May 2019 05:47:41 +0000 (UTC)
Date: Mon, 20 May 2019 07:47:41 +0200
Message-ID: <s5hzhnhd6de.wl-tiwai@suse.de>
From: Takashi Iwai <tiwai@suse.de>
To: Takashi Sakamoto <o-takashi@sakamocchi.jp>
In-Reply-To: <20190517025622.3401-1-o-takashi@sakamocchi.jp>
References: <20190517025622.3401-1-o-takashi@sakamocchi.jp>
User-Agent: Wanderlust/2.15.9 (Almost Unreal) SEMI/1.14.6 (Maruoka)
 FLIM/1.14.9 (=?UTF-8?B?R29qxY0=?=) APEL/10.8 Emacs/25.3
 (x86_64-suse-linux-gnu) MULE/6.0 (HANACHIRUSATO)
MIME-Version: 1.0 (generated by SEMI 1.14.6 - "Maruoka")
Cc: alsa-devel@alsa-project.org, clemens@ladisch.de
Subject: Re: [alsa-devel] [PATCH] ALSA: dice: add stream format parameters
	for PreSonus FireStudio
X-BeenThere: alsa-devel@alsa-project.org
X-Mailman-Version: 2.1.15
Precedence: list
List-Id: "Alsa-devel mailing list for ALSA developers -
 http://www.alsa-project.org" <alsa-devel.alsa-project.org>
List-Unsubscribe: <https://mailman.alsa-project.org/mailman/options/alsa-devel>, 
 <mailto:alsa-devel-request@alsa-project.org?subject=unsubscribe>
List-Archive: <http://mailman.alsa-project.org/pipermail/alsa-devel/>
List-Post: <mailto:alsa-devel@alsa-project.org>
List-Help: <mailto:alsa-devel-request@alsa-project.org?subject=help>
List-Subscribe: <https://mailman.alsa-project.org/mailman/listinfo/alsa-devel>, 
 <mailto:alsa-devel-request@alsa-project.org?subject=subscribe>
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: 7bit
Errors-To: alsa-devel-bounces@alsa-project.org
Sender: "Alsa-devel" <alsa-devel-bounces@alsa-project.org>

On Fri, 17 May 2019 04:56:22 +0200,
Takashi Sakamoto wrote:
> 
> FireStudio was launched by PreSonus 2009. This model consists of three
> ICs for its packet processing on IEEE 1394 bus:
> 
>  - Texus Instruments TSB41AB2 for physical layer of IEEE 1394 bus
>  - WaveFront semiconductor, Dice II STD ASIC for link layer of IEEE 1394
>    bus and protocol layer
>  - Xilinx Spartan XG3S500E FPGA for signal processing
> 
> This model don't support TCAT extended application protocol. For such
> devices, ALSA dice driver needs to have hard-coded parameters for stream
> formats.
> 
> This commit adds hard-coded table for this model. As a result, sampling
> transfer frequencies of 88.2/96.0 kHz are supported. I note that this
> patch can be backported to Linux kernel v4.18 and later.
> 
> $ python2 crpp < /sys/bus/firewire/devices/fw1/config_rom
>                ROM header and bus information block
>                -----------------------------------------------------------------
> 400  04042eda  bus_info_length 4, crc_length 4, crc 11994
> 404  31333934  bus_name "1394"
> 408  e0ff8112  irmc 1, cmc 1, isc 1, bmc 0, pmc 0, cyc_clk_acc 255,
>                max_rec 8 (512), max_rom 1, gen 1, spd 2 (S400)
> 40c  000a9204  company_id 000a92     |
> 410  023a8b7f  device_id 04023a8b7f  | EUI-64 000a9204023a8b7f
> 
>                root directory
>                -----------------------------------------------------------------
> 414  000661b6  directory_length 6, crc 25014
> 418  03000a92  vendor
> 41c  8100000a  --> descriptor leaf at 444
> 420  17000008  model
> 424  8100000d  --> descriptor leaf at 458
> 428  0c0087c0  node capabilities per IEEE 1394
> 42c  d1000001  --> unit directory at 430
> 
>                unit directory at 430
>                -----------------------------------------------------------------
> 430  00041c75  directory_length 4, crc 7285
> 434  12000a92  specifier id
> 438  13000001  version
> 43c  17000008  model
> 440  8100000c  --> descriptor leaf at 470
> 
>                descriptor leaf at 444
>                -----------------------------------------------------------------
> 444  00047c11  leaf_length 4, crc 31761
> 448  00000000  textual descriptor
> 44c  00000000  minimal ASCII
> 450  50726553  "PreS"
> 454  6f6e7573  "onus"
> 
>                descriptor leaf at 458
>                -----------------------------------------------------------------
> 458  0005d7b3  leaf_length 5, crc 55219
> 45c  00000000  textual descriptor
> 460  00000000  minimal ASCII
> 464  46495245  "FIRE"
> 468  53545544  "STUD"
> 46c  494f0000  "IO"
> 
>                descriptor leaf at 470
>                -----------------------------------------------------------------
> 470  0005d7b3  leaf_length 5, crc 55219
> 474  00000000  textual descriptor
> 478  00000000  minimal ASCII
> 47c  46495245  "FIRE"
> 480  53545544  "STUD"
> 484  494f0000  "IO"
> 
> Signed-off-by: Takashi Sakamoto <o-takashi@sakamocchi.jp>

Applied now.  Thanks.


Takashi
_______________________________________________
Alsa-devel mailing list
Alsa-devel@alsa-project.org
https://mailman.alsa-project.org/mailman/listinfo/alsa-devel
