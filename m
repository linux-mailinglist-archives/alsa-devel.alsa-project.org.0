Return-Path: <alsa-devel-bounces@alsa-project.org>
X-Original-To: lists+alsa-devel@lfdr.de
Delivered-To: lists+alsa-devel@lfdr.de
Received: from alsa0.perex.cz (alsa0.perex.cz [77.48.224.243])
	by mail.lfdr.de (Postfix) with ESMTPS id 28F9C6FFE7
	for <lists+alsa-devel@lfdr.de>; Mon, 22 Jul 2019 14:39:41 +0200 (CEST)
Received: from alsa1.perex.cz (alsa1.perex.cz [207.180.221.201])
	(using TLSv1.2 with cipher AECDH-AES256-SHA (256/256 bits))
	(No client certificate requested)
	by alsa0.perex.cz (Postfix) with ESMTPS id AACFE17C6;
	Mon, 22 Jul 2019 14:38:50 +0200 (CEST)
DKIM-Filter: OpenDKIM Filter v2.11.0 alsa0.perex.cz AACFE17C6
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/simple; d=alsa-project.org;
	s=default; t=1563799180;
	bh=ZLh6g24aUUkuRfqDJCHTX2/4f8/3IOmuDUsmRwoqNDk=;
	h=Date:From:To:In-Reply-To:References:Cc:Subject:List-Id:
	 List-Unsubscribe:List-Archive:List-Post:List-Help:List-Subscribe:
	 From;
	b=ppQwTjSAvdd8eLQa8pUDbX/NQXudy3HcP+1MEDw1vlwlEAfGLujNO2e4QyHp/YfN1
	 XEugIh+Ngsvh16kDZ+YzOt42tTYs/4gbJ16oUY/bAnws+c/WBJy4Jfo8vuL1JIv9jW
	 Pa/UAyZjbyrqDFWPG7RA5zUDAKgdWwl93Aqa+sHE=
Received: from alsa1.perex.cz (localhost.localdomain [127.0.0.1])
	by alsa1.perex.cz (Postfix) with ESMTP id F2814F803F4;
	Mon, 22 Jul 2019 14:26:44 +0200 (CEST)
X-Original-To: alsa-devel@alsa-project.org
Delivered-To: alsa-devel@alsa-project.org
Received: by alsa1.perex.cz (Postfix, from userid 50401)
 id 74DD1F803D7; Mon, 22 Jul 2019 14:26:42 +0200 (CEST)
X-Spam-Checker-Version: SpamAssassin 3.4.0 (2014-02-07) on alsa1.perex.cz
X-Spam-Level: *
X-Spam-Status: No, score=1.0 required=5.0 tests=PRX_BODY_30,SPF_HELO_NONE,
 SPF_PASS autolearn=disabled version=3.4.0
Received: from mx1.suse.de (mx2.suse.de [195.135.220.15])
 (using TLSv1.2 with cipher AECDH-AES256-SHA (256/256 bits))
 (No client certificate requested)
 by alsa1.perex.cz (Postfix) with ESMTPS id 80479F803D1
 for <alsa-devel@alsa-project.org>; Mon, 22 Jul 2019 14:26:39 +0200 (CEST)
DKIM-Filter: OpenDKIM Filter v2.11.0 alsa1.perex.cz 80479F803D1
X-Virus-Scanned: by amavisd-new at test-mx.suse.de
Received: from relay2.suse.de (unknown [195.135.220.254])
 by mx1.suse.de (Postfix) with ESMTP id 07A55ADFC;
 Mon, 22 Jul 2019 12:26:38 +0000 (UTC)
Date: Mon, 22 Jul 2019 14:26:37 +0200
Message-ID: <s5hsgqy8dc2.wl-tiwai@suse.de>
From: Takashi Iwai <tiwai@suse.de>
To: Pierre-Louis Bossart <pierre-louis.bossart@linux.intel.com>
In-Reply-To: <97359d3a-a3a0-696a-3d3f-64bd608eea5f@linux.intel.com>
References: <20190719203752.11151-1-pierre-louis.bossart@linux.intel.com>
 <20190719203752.11151-3-pierre-louis.bossart@linux.intel.com>
 <daaa01dc-d963-f215-90b1-132fde8e489a@intel.com>
 <s5h7e8aa1qs.wl-tiwai@suse.de>
 <97359d3a-a3a0-696a-3d3f-64bd608eea5f@linux.intel.com>
User-Agent: Wanderlust/2.15.9 (Almost Unreal) SEMI/1.14.6 (Maruoka)
 FLIM/1.14.9 (=?UTF-8?B?R29qxY0=?=) APEL/10.8 Emacs/25.3
 (x86_64-suse-linux-gnu) MULE/6.0 (HANACHIRUSATO)
MIME-Version: 1.0 (generated by SEMI 1.14.6 - "Maruoka")
Cc: Cezary Rojewski <cezary.rojewski@intel.com>,
 Curtis Malainey <cujomalainey@google.com>, alsa-devel@alsa-project.org,
 Daniel Drake <drake@endlessm.com>, Hui Wang <hui.wang@canonical.com>,
 broonie@kernel.org
Subject: Re: [alsa-devel] [PATCH v2 2/5] ALSA: hda: move parts of NHLT code
	to new module
X-BeenThere: alsa-devel@alsa-project.org
X-Mailman-Version: 2.1.15
Precedence: list
List-Id: "Alsa-devel mailing list for ALSA developers -
 http://www.alsa-project.org" <alsa-devel.alsa-project.org>
List-Unsubscribe: <https://mailman.alsa-project.org/mailman/options/alsa-devel>, 
 <mailto:alsa-devel-request@alsa-project.org?subject=unsubscribe>
List-Archive: <http://mailman.alsa-project.org/pipermail/alsa-devel/>
List-Post: <mailto:alsa-devel@alsa-project.org>
List-Help: <mailto:alsa-devel-request@alsa-project.org?subject=help>
List-Subscribe: <https://mailman.alsa-project.org/mailman/listinfo/alsa-devel>, 
 <mailto:alsa-devel-request@alsa-project.org?subject=subscribe>
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: 7bit
Errors-To: alsa-devel-bounces@alsa-project.org
Sender: "Alsa-devel" <alsa-devel-bounces@alsa-project.org>

On Mon, 22 Jul 2019 14:14:28 +0200,
Pierre-Louis Bossart wrote:
> 
> 
> 
> On 7/22/19 3:54 AM, Takashi Iwai wrote:
> > On Sat, 20 Jul 2019 23:06:46 +0200,
> > Cezary Rojewski wrote:
> >>
> >>> --- a/sound/hda/Kconfig
> >>> +++ b/sound/hda/Kconfig
> >>> @@ -29,3 +29,6 @@ config SND_HDA_PREALLOC_SIZE
> >>>      	  Note that the pre-allocation size can be changed dynamically
> >>>    	  via a proc file (/proc/asound/card*/pcm*/sub*/prealloc), too.
> >>> +
> >>> +config SND_INTEL_NHLT
> >>> +	tristate
> >>
> >> If above is true, "depends on ACPI" would be expected.
> >
> > This won't fix things in practice as the Kconfig reverse selection
> > ignores the dependencies of the selected item.  It'd be as a help for
> > readers, though.
> 
> There is a fallback if ACPI is not defined, so the code would always
> compile. Configurations which select SND_INTEL_NHLT already depend on
> ACPI.

IIUC, the question above came from the point:

 #if IS_ENABLED(CONFIG_ACPI) && IS_ENABLED(CONFIG_SND_INTEL_NHLT)
 ....
 #else
 ....
 #endif

and here Cezary suggested to drop IS_ENABLED(CONFIG_ACPI) *iff* the
dependency can be assured in Kconfig side.  But for that assurance,
putting "depends on ACPI" in config SND_INTEL_NHLT block won't
suffice; that was my followup.

So, as of the current code, we can drop IS_ENABLED(CONFIG_ACPI) from
the ifdef above, yes.  But the dependency is no rock solid at this
point, so either some comments or keeping the extra ifdef like the
above would be needed, IMO.


thanks,

Takashi
_______________________________________________
Alsa-devel mailing list
Alsa-devel@alsa-project.org
https://mailman.alsa-project.org/mailman/listinfo/alsa-devel
