Return-Path: <alsa-devel-bounces@alsa-project.org>
X-Original-To: lists+alsa-devel@lfdr.de
Delivered-To: lists+alsa-devel@lfdr.de
Received: from alsa0.perex.cz (alsa0.perex.cz [77.48.224.243])
	by mail.lfdr.de (Postfix) with ESMTPS id 901EAAA6FE
	for <lists+alsa-devel@lfdr.de>; Thu,  5 Sep 2019 17:09:00 +0200 (CEST)
Received: from alsa1.perex.cz (alsa1.perex.cz [207.180.221.201])
	(using TLSv1.2 with cipher AECDH-AES256-SHA (256/256 bits))
	(No client certificate requested)
	by alsa0.perex.cz (Postfix) with ESMTPS id F2D5F1676;
	Thu,  5 Sep 2019 17:08:09 +0200 (CEST)
DKIM-Filter: OpenDKIM Filter v2.11.0 alsa0.perex.cz F2D5F1676
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/simple; d=alsa-project.org;
	s=default; t=1567696140;
	bh=OYwBwdqBbnloi5XqXoAjhFbRjZsTiOwJZxiaLW5Boio=;
	h=Date:From:To:In-Reply-To:References:Cc:Subject:List-Id:
	 List-Unsubscribe:List-Archive:List-Post:List-Help:List-Subscribe:
	 From;
	b=IBchaTuMwCb/4ATESuVj9qbzq1shzJKQI/tfC1fHFKBgrT+gjY0DmwcQaCJXxgqzk
	 t0QQiktm/r6z+z+Bmt9batOm6G95HMVA4uVor+Ph8Pv0LfJyAyJJsS9p8cz+ZrS+z2
	 RJOuo2cYrr9X7VWNcKwVRGTHvyaZ4x1tWMLEgrNU=
Received: from alsa1.perex.cz (localhost.localdomain [127.0.0.1])
	by alsa1.perex.cz (Postfix) with ESMTP id 6E3F0F80448;
	Thu,  5 Sep 2019 17:07:15 +0200 (CEST)
X-Original-To: alsa-devel@alsa-project.org
Delivered-To: alsa-devel@alsa-project.org
Received: by alsa1.perex.cz (Postfix, from userid 50401)
 id BDA15F802DF; Thu,  5 Sep 2019 17:07:12 +0200 (CEST)
X-Spam-Checker-Version: SpamAssassin 3.4.0 (2014-02-07) on alsa1.perex.cz
X-Spam-Level: *
X-Spam-Status: No, score=1.0 required=5.0 tests=PRX_BODY_30,SPF_HELO_NONE,
 SPF_PASS autolearn=disabled version=3.4.0
Received: from mx1.suse.de (mx2.suse.de [195.135.220.15])
 (using TLSv1.2 with cipher AECDH-AES256-SHA (256/256 bits))
 (No client certificate requested)
 by alsa1.perex.cz (Postfix) with ESMTPS id 169B2F802DF
 for <alsa-devel@alsa-project.org>; Thu,  5 Sep 2019 17:07:09 +0200 (CEST)
DKIM-Filter: OpenDKIM Filter v2.11.0 alsa1.perex.cz 169B2F802DF
X-Virus-Scanned: by amavisd-new at test-mx.suse.de
Received: from relay2.suse.de (unknown [195.135.220.254])
 by mx1.suse.de (Postfix) with ESMTP id 6DC6BB69A;
 Thu,  5 Sep 2019 15:07:08 +0000 (UTC)
Date: Thu, 05 Sep 2019 17:07:07 +0200
Message-ID: <s5ha7bipysk.wl-tiwai@suse.de>
From: Takashi Iwai <tiwai@suse.de>
To: Sergey 'Jin' Bostandzhyan <jin@mediatomb.cc>
In-Reply-To: <20190902213912.GA6630@xn--80adja5bqm.su>
References: <20190819195714.GA2737@xn--80adja5bqm.su>
 <s5hef1dthbk.wl-tiwai@suse.de>
 <20190822203031.GA22363@xn--80adja5bqm.su>
 <s5h5zmg48u2.wl-tiwai@suse.de>
 <20190829103805.GA1525@xn--80adja5bqm.su>
 <s5hsgpk2os6.wl-tiwai@suse.de>
 <20190830114510.GA10027@xn--80adja5bqm.su>
 <s5hzhjqzvu5.wl-tiwai@suse.de>
 <20190901192737.GB28125@xn--80adja5bqm.su>
 <s5hlfv7jj2r.wl-tiwai@suse.de>
 <20190902213912.GA6630@xn--80adja5bqm.su>
User-Agent: Wanderlust/2.15.9 (Almost Unreal) SEMI/1.14.6 (Maruoka)
 FLIM/1.14.9 (=?UTF-8?B?R29qxY0=?=) APEL/10.8 Emacs/25.3
 (x86_64-suse-linux-gnu) MULE/6.0 (HANACHIRUSATO)
MIME-Version: 1.0 (generated by SEMI 1.14.6 - "Maruoka")
Cc: alsa-devel@alsa-project.org
Subject: Re: [alsa-devel] Surround speaker connection on Acer 8951G
X-BeenThere: alsa-devel@alsa-project.org
X-Mailman-Version: 2.1.15
Precedence: list
List-Id: "Alsa-devel mailing list for ALSA developers -
 http://www.alsa-project.org" <alsa-devel.alsa-project.org>
List-Unsubscribe: <https://mailman.alsa-project.org/mailman/options/alsa-devel>, 
 <mailto:alsa-devel-request@alsa-project.org?subject=unsubscribe>
List-Archive: <http://mailman.alsa-project.org/pipermail/alsa-devel/>
List-Post: <mailto:alsa-devel@alsa-project.org>
List-Help: <mailto:alsa-devel-request@alsa-project.org?subject=help>
List-Subscribe: <https://mailman.alsa-project.org/mailman/listinfo/alsa-devel>, 
 <mailto:alsa-devel-request@alsa-project.org?subject=subscribe>
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: 7bit
Errors-To: alsa-devel-bounces@alsa-project.org
Sender: "Alsa-devel" <alsa-devel-bounces@alsa-project.org>

On Mon, 02 Sep 2019 23:39:12 +0200,
Sergey 'Jin' Bostandzhyan wrote:
> 
> > One thing to be improved would be to drop the surround jack control.
> > Adjust the pin config to different value with the fixed pin
> > connection, so that the auto-parser won't create the "Surround Jack"
> > control.  This isn't needed by PA or else, otherwise it may be
> > confusing.
> 
> Hmm, if I understand you correctly, then you are referring to bits 31:30
> Port Connectivity? 
> 
> It does not seem to work that way... I tried all combinations and I either
> lose jack detect support or I lose the 5.1 profile in Pulse.
> 
> With these settings snd_hda_jack_detect_state() never returns HDA_JACK_PRESENT:
> 0x91130012 [Fixed] Speaker at Int Rear
> 0xd1130012 [Both] Speaker at Int Rear
> 
> I can plug or unplug, I get called, but I always receive HDA_JACK_PHANTOM
> 
> snd_hda_jack_detect_state() works fine with "no physical connection to port":
> 0x51130012 [N/A] Speaker at Int Rear
> 
> But with the above pin setting I "lose" the 5.1 profile in Pulse...
> 
> Which leaves me with with what I had before:
> 0x11130012 [Jack] Speaker at Int Rear
> 
> Am I missing something or did you mean some other setting? Should I be
> using a different function instead of snd_hda_jack_detect_state() to
> check my jack state in the callback?

OK, this would be really tricky to work around it.  It's merely a jack
control that won't be referred by PA, so we can live with it, unless
you see any obvious side effect.

So, when the patch is ready for submission, feel free to send it.


thanks,

Takashi
_______________________________________________
Alsa-devel mailing list
Alsa-devel@alsa-project.org
https://mailman.alsa-project.org/mailman/listinfo/alsa-devel
