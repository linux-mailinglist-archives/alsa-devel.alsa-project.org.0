Return-Path: <alsa-devel-bounces@alsa-project.org>
X-Original-To: lists+alsa-devel@lfdr.de
Delivered-To: lists+alsa-devel@lfdr.de
Received: from alsa0.perex.cz (alsa0.perex.cz [77.48.224.243])
	by mail.lfdr.de (Postfix) with ESMTPS id 22A4B3AFDFC
	for <lists+alsa-devel@lfdr.de>; Tue, 22 Jun 2021 09:36:03 +0200 (CEST)
Received: from alsa1.perex.cz (alsa1.perex.cz [207.180.221.201])
	(using TLSv1.2 with cipher AECDH-AES256-SHA (256/256 bits))
	(No client certificate requested)
	by alsa0.perex.cz (Postfix) with ESMTPS id A33731684;
	Tue, 22 Jun 2021 09:35:12 +0200 (CEST)
DKIM-Filter: OpenDKIM Filter v2.11.0 alsa0.perex.cz A33731684
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/simple; d=alsa-project.org;
	s=default; t=1624347362;
	bh=hC6yFMlcabodQhEobeqoMpAQgvZtHq66TZwWhIqFuB0=;
	h=Date:From:To:Subject:In-Reply-To:References:Cc:List-Id:
	 List-Unsubscribe:List-Archive:List-Post:List-Help:List-Subscribe:
	 From;
	b=nGklqx4TfD5bHAMQJt7dymR6wSON8GB0EBsNMQgwHwkrtH4kgV+lwkcCHTOT95BV8
	 y99YO3vw2ar9xw8SNUvVuvET5Ohv1xniS4ihAIo241aBMuZk320r9LEuTFwbDMo873
	 UkT2ty9gn+ihtBsx1kgWiXDghhPFz/k7epc/BjqQ=
Received: from alsa1.perex.cz (localhost.localdomain [127.0.0.1])
	by alsa1.perex.cz (Postfix) with ESMTP id 1664CF800E1;
	Tue, 22 Jun 2021 09:34:34 +0200 (CEST)
X-Original-To: alsa-devel@alsa-project.org
Delivered-To: alsa-devel@alsa-project.org
Received: by alsa1.perex.cz (Postfix, from userid 50401)
 id 16340F80268; Tue, 22 Jun 2021 09:34:32 +0200 (CEST)
X-Spam-Checker-Version: SpamAssassin 3.4.0 (2014-02-07) on alsa1.perex.cz
X-Spam-Level: 
X-Spam-Status: No, score=-0.1 required=5.0 tests=DKIM_SIGNED,DKIM_VALID,
 DKIM_VALID_AU,SPF_HELO_NONE,SPF_NONE,URIBL_BLOCKED autolearn=disabled
 version=3.4.0
Received: from smtp-out2.suse.de (smtp-out2.suse.de [195.135.220.29])
 (using TLSv1.2 with cipher ECDHE-RSA-AES128-GCM-SHA256 (128/128 bits))
 (No client certificate requested)
 by alsa1.perex.cz (Postfix) with ESMTPS id 0608CF800E1
 for <alsa-devel@alsa-project.org>; Tue, 22 Jun 2021 09:34:25 +0200 (CEST)
DKIM-Filter: OpenDKIM Filter v2.11.0 alsa1.perex.cz 0608CF800E1
Authentication-Results: alsa1.perex.cz;
 dkim=pass (1024-bit key) header.d=suse.de header.i=@suse.de
 header.b="tBCrYGaq"; 
 dkim=permerror (0-bit key) header.d=suse.de header.i=@suse.de
 header.b="89arODnM"
Received: from relay2.suse.de (relay2.suse.de [149.44.160.134])
 by smtp-out2.suse.de (Postfix) with ESMTP id 5D1CB1FD45;
 Tue, 22 Jun 2021 07:34:25 +0000 (UTC)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=suse.de; s=susede2_rsa;
 t=1624347265; h=from:from:reply-to:date:date:message-id:message-id:to:to:cc:cc:
 mime-version:mime-version:content-type:content-type:
 content-transfer-encoding:content-transfer-encoding:
 in-reply-to:in-reply-to:references:references;
 bh=9LKbNFBkQ2Ddvv/ym//yRRitqlpl+pT84mlYwBxMcGU=;
 b=tBCrYGaqSF3+ru5AXFhWkVcQf9AiZ2FCH/COj4aiapBdVxL/Z1WTxgGa+SVRTbBETX4/VH
 pxvYt/ZzUVypl9TC40wDCYpNV70cFBc2YaUui8dwm2ZXO1EgB0qABLYTKdBzVxMAIdvdKE
 KmaSXG23fx8NsSqtWq8ATdHS5j0jiTo=
DKIM-Signature: v=1; a=ed25519-sha256; c=relaxed/relaxed; d=suse.de;
 s=susede2_ed25519; t=1624347265;
 h=from:from:reply-to:date:date:message-id:message-id:to:to:cc:cc:
 mime-version:mime-version:content-type:content-type:
 content-transfer-encoding:content-transfer-encoding:
 in-reply-to:in-reply-to:references:references;
 bh=9LKbNFBkQ2Ddvv/ym//yRRitqlpl+pT84mlYwBxMcGU=;
 b=89arODnMoB+pU68M+quWs55fJOOz/EsScuhmha/QYHN6uwcHlK3PpV/DH7DNp/ZwHSSrLI
 NrjSy2gmBSttSCDg==
Received: from alsa1.suse.de (alsa1.suse.de [10.160.4.42])
 by relay2.suse.de (Postfix) with ESMTP id 56466A3B8D;
 Tue, 22 Jun 2021 07:34:25 +0000 (UTC)
Date: Tue, 22 Jun 2021 09:34:25 +0200
Message-ID: <s5hczses67y.wl-tiwai@suse.de>
From: Takashi Iwai <tiwai@suse.de>
To: Vladimir Sadovnikov <sadko4u@gmail.com>
Subject: Re: [PATCH 16/31] ALSA: usb-audio: scarlett2: Add Gen 3 mixer support
In-Reply-To: <0b00f3a5-fe31-0ad5-c723-d354dc724e58@gmail.com>
References: <cover.1624294591.git.g@b4.vu>
 <fc4bb1e8cfb3019b1033afeed59badb904990115.1624294591.git.g@b4.vu>
 <s5hh7hqs7ss.wl-tiwai@suse.de>
 <0b00f3a5-fe31-0ad5-c723-d354dc724e58@gmail.com>
User-Agent: Wanderlust/2.15.9 (Almost Unreal) SEMI/1.14.6 (Maruoka)
 FLIM/1.14.9 (=?UTF-8?B?R29qxY0=?=) APEL/10.8 Emacs/25.3
 (x86_64-suse-linux-gnu) MULE/6.0 (HANACHIRUSATO)
MIME-Version: 1.0 (generated by SEMI 1.14.6 - "Maruoka")
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 8bit
Cc: Hin-Tak Leung <htl10@users.sourceforge.net>, alsa-devel@alsa-project.org,
 "Geoffrey D. Bennett" <g@b4.vu>
X-BeenThere: alsa-devel@alsa-project.org
X-Mailman-Version: 2.1.15
Precedence: list
List-Id: "Alsa-devel mailing list for ALSA developers -
 http://www.alsa-project.org" <alsa-devel.alsa-project.org>
List-Unsubscribe: <https://mailman.alsa-project.org/mailman/options/alsa-devel>, 
 <mailto:alsa-devel-request@alsa-project.org?subject=unsubscribe>
List-Archive: <http://mailman.alsa-project.org/pipermail/alsa-devel/>
List-Post: <mailto:alsa-devel@alsa-project.org>
List-Help: <mailto:alsa-devel-request@alsa-project.org?subject=help>
List-Subscribe: <https://mailman.alsa-project.org/mailman/listinfo/alsa-devel>, 
 <mailto:alsa-devel-request@alsa-project.org?subject=subscribe>
Errors-To: alsa-devel-bounces@alsa-project.org
Sender: "Alsa-devel" <alsa-devel-bounces@alsa-project.org>

On Tue, 22 Jun 2021 09:07:20 +0200,
Vladimir Sadovnikov wrote:
> 
> Hello Takashi!
> 
> Since Focusrite devices are too advanced in settings, the overall
> amount of 256 controls is not enough for these devices (like 18i20).
> I would like also to extend this constant up to 1024 or even more
> since adding support of software configuration of the device also
> can exceed the amount of 512 control elements.

This define isn't for the total number of mixer elements.  Instead,
it's just a size of the bitmap table that contains the head of the
linked list for each unit id (in the sense of USB mixer spec).
So the number of mixer elements is unlimited.


Takashi

> 
> Let's assume we have a mute switch for each mixer gain setting. For
> the 18i20 device this will give:
> 12 inputs * 25 outputs = 300 mute switches.
> 
> So I think this constant should be increased rapidly up to 1024 or even to 2048.
> 
> Best,
> Vladimir
> 
> 22.06.2021 10:00, Takashi Iwai пишет:
> > On Mon, 21 Jun 2021 20:09:48 +0200,
> > Geoffrey D. Bennett wrote:
> >> Add mixer support for the Focusrite Scarlett 4i4, 8i6, 18i8, and 18i20
> >> Gen 3 devices.
> >>
> >> Signed-off-by: Geoffrey D. Bennett <g@b4.vu>
> >> ---
> >>   sound/usb/mixer.c               |   2 +-
> >>   sound/usb/mixer_quirks.c        |   4 +
> >>   sound/usb/mixer_scarlett_gen2.c | 260 +++++++++++++++++++++++++++++---
> >>   3 files changed, 246 insertions(+), 20 deletions(-)
> >>
> >> diff --git a/sound/usb/mixer.c b/sound/usb/mixer.c
> >> index 428d581f988f..ba4aa1eacb04 100644
> >> --- a/sound/usb/mixer.c
> >> +++ b/sound/usb/mixer.c
> >> @@ -50,7 +50,7 @@
> >>   #include "mixer_quirks.h"
> >>   #include "power.h"
> >>   -#define MAX_ID_ELEMS	256
> >> +#define MAX_ID_ELEMS	512
> > This change requires the explanation.
> > Usually the unit id is a byte per definition, so it can't be over
> > 256.
> >
> >
> > thanks,
> >
> > Takashi
> 
> 
